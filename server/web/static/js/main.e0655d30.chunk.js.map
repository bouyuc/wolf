{"version":3,"sources":["logo.svg","Footer.js","PlayerTable.js","DarkPlayerTable.js","RoleTable.js","AddRole.js","drag/ItemTypes.js","drag/Card.js","drag/Container.js","EditTemplateRole.js","Admin.js","EnabledTemplateInfo.js","God.js","Player.js","Login.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","makeStyles","theme","footer","backgroundColor","palette","background","paper","padding","spacing","useStyles","margin","table","minWidth","title","flexGrow","menuButton","marginRight","SET_DIE_STATUS","gql","SET_CHIEF_ID","SET_VOTE_WEIGHTED_ID","PlayerTable","props","classes","useMutation","setDie","setChiefId","setVoteWeightedId","TableContainer","component","Paper","Table","className","aria-label","size","TableHead","TableRow","TableCell","align","TableBody","data","map","row","key","id","chiefId","chiefVoteState","isCandidate","isDropedOut","Checkbox","onChange","e","variables","checked","color","inputProps","isDie","voteWeightedId","scope","name","roleName","votedNumber","chiefVote","toString","vote","style","isEmpty","isVoteFinish","transition","fontSize","SET_DARK_DIE_STATUS","useState","Set","idSet","setIdSet","Box","display","Button","variant","onClick","targets","disabled","newSet","has","delete","add","BaseTable","total","result","forEach","d","number","push","processData","Fragment","players","v","idx","marginLeft","RoleTable","GET_ROLES","AddRole","React","roleId","setRoleId","roleNumber","setRoleNumber","useQuery","loading","error","console","log","justifyContent","Autocomplete","options","roles","filter","getOptionLabel","option","width","event","newValue","renderInput","params","TextField","label","type","value","target","marginTop","Fab","updateRoleNumber","parseInt","border","marginBottom","cursor","Card","text","index","moveCard","ref","useRef","useDrop","accept","ItemTypes","hover","item","monitor","current","dragIndex","hoverIndex","hoverBoundingRect","getBoundingClientRect","hoverMiddleY","bottom","top","hoverClientY","getClientOffset","y","drop","useDrag","collect","isDragging","opacity","drag","Container","cards","setCards","useCallback","dragCard","newCards","update","$splice","onUpdate","card","i","renderCard","GET_TEMPLATE","UPDATE_ROLE_NUMBER","UPDATE_RULE","UPDATE_ROLE_PRIORITY","TabPanel","children","other","role","hidden","aria-labelledby","p","convertToDragData","EditDarkPriority","priorityList","setPrioritylist","orgPriorityList","setOrgPriorityList","useLazyQuery","fetchPolicy","geTemplate","called","onCompleted","updateRolePriority","useEffect","idData","template","dragData","DndProvider","backend","Backend","IconButton","ids","EditRole","Typography","gutterBottom","EditRuleCore","setValue","updateRule","description","multiline","rows","fullWidth","EditRule","refetch","EditTemplate","square","Tabs","indicatorColor","textColor","Tab","ADD_TEMPLATE","DELETE_TEMPLATE","ENABLE_TEMPLATE","TemplateControl","onSelect","isEnabled","onEdit","onDelete","TemplateTable","addTemplate","deleteTemplate","setName","enableTemplate","maxWidth","templates","setEditName","Admin","editName","tData","EnabledTemplate","enabledTemplate","UPDATE_PLAYER_NAME","GENERATE_TEMPLATE_ROLE","GENERATE_TEMPLATE_PLAYER","REMOVE_ALL_PLAYER","VOTE_START","VOTE_CHIEF_START","parseData","playerGroup","r","TemplateRoleTable","VoteAction","targetList","setTargetList","hasChief","hasVoteTarget","onClose","voteStart","isLock","hasTarget","DialogContent","DialogContentText","isTarget","player","Radio","includes","length","DialogActions","Game","generateRole","generatePlayer","removeAllPlayer","isOpen","setIsOpen","useDebounce","updatePlayerName","isPlayerMode","isDark","Dialog","open","DialogTitle","God","history","useHistory","getRole","isMounted","interval","setInterval","clearInterval","graphQLErrors","extensions","code","gameInfo","setDarkMode","pass","elevation","submit","container","paddingTop","paddingBottom","GET_PLAYER_INFO","SUBMIT_VOTE","SUBMIT_CHIEF_CANDIDATE","DROP_OUT_CHIEF_CANDIDATE","GET_ENABLED_TEMPLATE","Audio","setTarget","submitVote","isValidCandidate","CandidateChiefDialog","submitChiefCandidate","dropOutChiefCandidate","PlayerControl","playerInfo","playerCalled","openChiefCandidate","setOpenChiefCandidate","root","CardContent","TemplateInfo","Player","GET_PLAYERS","UPDATE_PLAYER_PASS","Copyright","Date","getFullYear","Login","playerId","setPlayerId","playerPass","setPlayerPass","stopPolling","startPolling","updatePlayerPass","isValid","CssBaseline","round","src","renderOption","mt","client","ApolloClient","cache","InMemoryCache","link","HttpLink","uri","auth","LOG_OFF","LogoffButton","logoff","getPlayer","login","AppBar","position","Toolbar","edge","pt","App","isDarkMode","useMemo","createMuiTheme","primary","main","ThemeProvider","exact","path","ApolloProvider","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.e0655d30.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.5d5d9eef.svg\";","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport Typography from '@material-ui/core/Typography';\nimport Link from '@material-ui/core/Link';\n\nfunction Copyright() {\n  return (\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\n      {'Copyright © '}\n      <Link color=\"inherit\" href=\"https://material-ui.com/\">\n        Your Website\n      </Link>{' '}\n      {new Date().getFullYear()}\n      {'.'}\n    </Typography>\n  );\n}\n\nconst useStyles = makeStyles((theme) => ({\n  footer: {\n    backgroundColor: theme.palette.background.paper,\n    // marginTop: theme.spacing(8),\n    padding: theme.spacing(6, 0),\n  },\n}));\n\nexport default function Footer(props) {\n  const classes = useStyles();\n  const { description, title } = props;\n\n  return (\n    <footer className={classes.footer}>\n      <Container maxWidth=\"lg\">\n        <Typography variant=\"h6\" align=\"center\" gutterBottom>\n          {title}\n        </Typography>\n        <Typography variant=\"subtitle1\" align=\"center\" color=\"textSecondary\" component=\"p\">\n          {description}\n        </Typography>\n        <Copyright />\n      </Container>\n    </footer>\n  );\n}\n\nFooter.propTypes = {\n  description: PropTypes.string,\n  title: PropTypes.string,\n};","import React from \"react\";\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableContainer from \"@material-ui/core/TableContainer\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport { gql } from \"apollo-boost\";\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport {\n  fade,\n  withStyles,\n  makeStyles,\n  createMuiTheme,\n} from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles((theme) => ({\n  margin: {\n    margin: theme.spacing(1),\n  },\n  table: {\n    minWidth: 750,\n  },\n  title: {\n    flexGrow: 1,\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n}));\n\nconst SET_DIE_STATUS = gql`\n  mutation SetDieStatus($id: Int!) {\n    setDieStatus(id: $id)\n  }\n`;\nconst SET_CHIEF_ID = gql`\n  mutation SetChiefId($id: Int!) {\n    setChiefId(id: $id)\n  }\n`;\n\nconst SET_VOTE_WEIGHTED_ID = gql`\n  mutation SetVoteWeightedId($id: Int!) {\n    setVoteWeightedId(id: $id)\n  }\n`;\n\n//voteWeightedId\n\nexport default function PlayerTable(props) {\n  const classes = useStyles();\n  const [setDie] = useMutation(SET_DIE_STATUS);\n  const [setChiefId] = useMutation(SET_CHIEF_ID);\n  const [setVoteWeightedId] = useMutation(SET_VOTE_WEIGHTED_ID);\n  return (\n    <TableContainer component={Paper}>\n      <Table className={classes.table} aria-label=\"simple table\" size=\"small\">\n        <TableHead>\n          <TableRow>\n            <TableCell>警長</TableCell>\n            <TableCell>死亡</TableCell>\n            <TableCell>放逐加權</TableCell>\n            <TableCell>ID</TableCell>\n\n            <TableCell align=\"left\">玩家</TableCell>\n            <TableCell align=\"right\">角色</TableCell>\n            <TableCell align=\"right\">投票</TableCell>\n            <TableCell align=\"center\">警長</TableCell>\n            <TableCell align=\"center\">放逐</TableCell>\n            <TableCell align=\"right\">上線</TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {props.data.map((row) => (\n            <TableRow key={row.id}>\n              <TableCell>\n                {(row.id === 0 ||\n                  props.chiefId >= 0 ||\n                  (row.chiefVoteState &&\n                    row.chiefVoteState.isCandidate &&\n                    !row.chiefVoteState.isDropedOut)) && (\n                  <Checkbox\n                    onChange={(e) => {\n                      setChiefId({ variables: { id: row.id } });\n                    }}\n                    checked={row.id === props.chiefId}\n                    color=\"primary\"\n                    inputProps={{ \"aria-label\": \"secondary checkbox\" }}\n                  />\n                )}\n\n                {row.chiefVoteState && row.chiefVoteState.isCandidate && (\n                  <button>重置</button>\n                )}\n              </TableCell>\n              <TableCell>\n                {row.id ? (\n                  <Checkbox\n                    onChange={(e) => {\n                      setDie({ variables: { id: row.id } });\n                    }}\n                    checked={row.isDie}\n                    color=\"primary\"\n                    inputProps={{ \"aria-label\": \"secondary checkbox\" }}\n                  />\n                ) : null}\n              </TableCell>\n              <TableCell>\n                <Checkbox\n                  onChange={(e) => {\n                    //setChiefId({variables:{id:row.id}});\n                    setVoteWeightedId({ variables: { id: row.id } });\n                  }}\n                  checked={row.id === props.voteWeightedId}\n                  color=\"primary\"\n                  inputProps={{ \"aria-label\": \"secondary checkbox\" }}\n                />\n              </TableCell>\n              <TableCell component=\"th\" scope=\"row\">\n                {row.id}\n              </TableCell>\n              <TableCell align=\"right\">{row.name}</TableCell>\n              <TableCell align=\"right\">{row.roleName}</TableCell>\n              <TableCell align=\"right\">{row.votedNumber}</TableCell>\n              <TableCell align=\"right\">{row.chiefVote.toString()}</TableCell>\n              <TableCell align=\"right\">{row.vote.toString()}</TableCell>\n              <TableCell align=\"right\">\n                <span\n                  style={{\n                    color: row.isEmpty\n                      ? \"gray\"\n                      : row.isVoteFinish\n                      ? \"lightgreen\"\n                      : \"orange\",\n                    transition: \"all .3s ease\",\n                    fontSize: \"24px\",\n                    marginRight: \"10px\",\n                  }}\n                >\n                  &#x25cf;\n                </span>\n              </TableCell>\n            </TableRow>\n          ))}\n        </TableBody>\n      </Table>\n    </TableContainer>\n  );\n}\n","import React, { useState } from \"react\";\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableContainer from \"@material-ui/core/TableContainer\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport { gql } from \"apollo-boost\";\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport Box from \"@material-ui/core/Box\";\nimport Button from \"@material-ui/core/Button\";\nimport {\n  fade,\n  withStyles,\n  makeStyles,\n  createMuiTheme,\n} from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles((theme) => ({\n  margin: {\n    margin: theme.spacing(1),\n  },\n  table: {\n    minWidth: 750,\n  },\n  title: {\n    flexGrow: 1,\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n}));\n\nconst SET_DARK_DIE_STATUS = gql`\n  mutation SetDarkDieStatus($targets: [Int]!) {\n    setDarkDieStatus(targets: $targets)\n  }\n`;\n\nconst SET_DIE_STATUS = gql`\n  mutation SetDieStatus($id: Int!) {\n    setDieStatus(id: $id)\n  }\n`;\nconst SET_CHIEF_ID = gql`\n  mutation SetChiefId($id: Int!) {\n    setChiefId(id: $id)\n  }\n`;\n\nconst SET_VOTE_WEIGHTED_ID = gql`\nmutation SetVoteWeightedId($id: Int!) {\n  setVoteWeightedId(id: $id)\n}\n`\n\nexport default function PlayerTable(props) {\n  const classes = useStyles();\n\n  const [idSet, setIdSet] = useState(new Set());\n\n  const [setDie] = useMutation(SET_DARK_DIE_STATUS);\n  const [setChiefId] = useMutation(SET_CHIEF_ID);\n  const [setVoteWeightedId] = useMutation(SET_VOTE_WEIGHTED_ID);\n  return (\n    <>\n      <Box display=\"flex\">\n        <Button variant=\"contained\" color=\"secondary\" onClick={() => {\n          setDie({variables:{targets:[...idSet]}});\n        }}>\n          確認死亡\n        </Button>\n      </Box>\n      <TableContainer component={Paper}>\n        <Table className={classes.table} aria-label=\"simple table\" size=\"small\">\n          <TableHead>\n            <TableRow>\n              <TableCell>警長</TableCell>\n              <TableCell>死亡</TableCell>\n              <TableCell>放逐加權</TableCell>\n              <TableCell>ID</TableCell>\n\n              <TableCell align=\"left\">玩家</TableCell>\n              <TableCell align=\"right\">角色</TableCell>\n              <TableCell align=\"right\">投票</TableCell>\n              <TableCell align=\"center\">警長</TableCell>\n              <TableCell align=\"center\">放逐</TableCell>\n              <TableCell align=\"right\">上線</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {props.data.map((row) => (\n              <TableRow key={row.id}>\n                <TableCell>\n                  <Checkbox\n                    disabled\n                    onChange={(e) => {\n                      setChiefId({ variables: { id: row.id } });\n                    }}\n                    checked={row.id === props.chiefId}\n                    color=\"primary\"\n                    inputProps={{ \"aria-label\": \"secondary checkbox\" }}\n                  />\n                </TableCell>\n                <TableCell>\n                  {row.id ? (\n                    <Checkbox\n                      onChange={(e) => {\n                        const newSet = new Set(idSet);\n                        if (idSet.has(row.id)) {\n                          newSet.delete(row.id);\n                        } else {\n                          newSet.add(row.id);\n                        }\n\n                        setIdSet(newSet);\n                        //setDie({variables:{id:row.id}});\n                      }}\n                      checked={row.isDie || idSet.has(row.id)}\n                      disabled={row.isDie}\n                      color=\"primary\"\n                      inputProps={{ \"aria-label\": \"secondary checkbox\" }}\n                    />\n                  ) : null}\n                </TableCell>\n                <TableCell>\n                <Checkbox\n                  onChange={(e) => {\n                    //setChiefId({variables:{id:row.id}});\n                    setVoteWeightedId({variables:{id:row.id}});\n                  }}\n                  checked={row.id === props.voteWeightedId}\n                  color=\"primary\"\n                  inputProps={{ \"aria-label\": \"secondary checkbox\" }}\n                />\n              </TableCell>\n                <TableCell component=\"th\" scope=\"row\">\n                  {row.id}\n                </TableCell>\n                <TableCell align=\"right\">{row.name}</TableCell>\n                <TableCell align=\"right\">{row.roleName}</TableCell>\n                <TableCell align=\"right\">{row.votedNumber}</TableCell>\n                <TableCell align=\"right\">{row.chiefVote.toString()}</TableCell>\n                <TableCell align=\"right\">{row.vote.toString()}</TableCell>\n                <TableCell align=\"right\">\n                  <span\n                    style={{\n                      color: row.isEmpty\n                        ? \"gray\"\n                        : row.isVoteFinish\n                        ? \"lightgreen\"\n                        : \"orange\",\n                      transition: \"all .3s ease\",\n                      fontSize: \"24px\",\n                      marginRight: \"10px\",\n                    }}\n                  >\n                    &#x25cf;\n                  </span>\n                </TableCell>\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n      </TableContainer>\n    </>\n  );\n}\n","import React, {useEffect} from \"react\";\nimport { useQuery, useMutation , useLazyQuery} from \"@apollo/client\";\nimport { gql } from \"apollo-boost\";\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableContainer from \"@material-ui/core/TableContainer\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport Paper from \"@material-ui/core/Paper\";\nimport {\n  fade,\n  withStyles,\n  makeStyles,\n  createMuiTheme,\n} from \"@material-ui/core/styles\";\nconst GET_ROLES = gql`\n  {\n    roles {\n      id\n      name\n      number\n    }\n    players {\n      id\n      name\n      roleName\n      isEmpty\n    }\n  }\n`;\n\nconst useStyles = makeStyles((theme) => ({\n  margin: {\n    margin: theme.spacing(1),\n  },\n  table: {\n    minWidth: 450,\n  },\n  title: {\n    flexGrow: 1,\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n}));\n\n//if the number = 0 will not show\n//caculate the total number\nfunction processData(data) {\n  let total = 0;\n\n  const result = [];\n\n  data.forEach((d) => {\n    const { number } = d;\n    if (number) {\n      total += number;\n      result.push(d);\n    }\n  });\n  return { total, data: result };\n}\n\nfunction BaseTable(props) {\n  const classes = useStyles();\n\n \n  \n  const { total, data } = processData(props.data);\n\n  return (\n    <TableContainer component={Paper}>\n      <Table className={classes.table} aria-label=\"simple table\" size=\"small\">\n        <TableHead>\n          <TableRow>\n            <TableCell>角色</TableCell>\n\n            <TableCell align=\"right\">人數</TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {data.map((row) => (\n            <React.Fragment key={row.name}>\n              <TableRow key={row.name}>\n                <TableCell component=\"th\" scope=\"row\">\n                  {row.name}\n                </TableCell>\n                <TableCell align=\"right\">{row.number}</TableCell>\n              </TableRow>\n              {row.players ? (\n                <TableRow align=\"left\">\n                  {row.players.map((v,idx) => (\n                    <div style={{ fontSize: 22, marginLeft:45 }} key={idx}>{`${v.id} : ${v.name}`}</div>\n                  ))}\n                </TableRow>\n              ) : null}\n           </React.Fragment>\n          ))}\n          <TableRow>\n            <TableCell align=\"right\">總人數</TableCell>\n            <TableCell align=\"right\">{total}</TableCell>\n          </TableRow>\n        </TableBody>\n      </Table>\n    </TableContainer>\n  );\n}\n\nfunction RoleTable(props) {\n\n  return <BaseTable data={props.data} />;\n\n  /*\n  const { variables, query, pollInterval } = props;\n\n  \n  const [queryData,{ loading, error, data: rawData, called}] = useLazyQuery(query, {\n    //fetchPolicy:\"network-only\",\n    variables,\n    //pollInterval\n  });\n\n\n  let isMounted = true;\n useEffect(() => {\n   if (isMounted) {\n     queryData();\n   }\n\n   const interval = setInterval(() => {\n     if (isMounted) {\n       queryData();\n     }\n   }, 500);\n\n   return () => {\n     clearInterval(interval);\n     isMounted = false;\n   };\n }, []);\n\n  if (!called || !rawData) {\n    return <div>Loading</div>;\n  }\n\n  const data = props.parseData(rawData);\n\n  console.log(data, variables, query, rawData);\n\n  return <BaseTable data={data} />;\n  */\n}\n\nexport { RoleTable, BaseTable };\n","import React from \"react\";\nimport {\n  fade,\n  withStyles,\n  makeStyles,\n  createMuiTheme,\n} from \"@material-ui/core/styles\";\nimport Button from \"@material-ui/core/Button\";\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport { gql } from \"apollo-boost\";\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\nimport TextField from \"@material-ui/core/TextField\";\nimport PlayerTable from \"./PlayerTable\";\nimport RoleTable from \"./RoleTable\";\nimport Fab from \"@material-ui/core/Fab\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport SaveIcon from \"@material-ui/icons/Save\";\nimport Container from \"@material-ui/core/Container\";\n\nconst GET_ROLES = gql`\n  {\n    roles {\n      id\n      name\n      \n    }\n    \n  }\n`;\n\nconst useStyles = makeStyles((theme) => ({\n  margin: {\n    margin: theme.spacing(1),\n  },\n  table: {\n    minWidth: 250,\n  },\n  title: {\n    flexGrow: 1,\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n}));\n\nexport default function AddRole(props) {\n  const classes = useStyles();\n  const [roleId, setRoleId] = React.useState(-1);\n  const [roleNumber, setRoleNumber] = React.useState(0);\n  const { loading, error, data } = useQuery(GET_ROLES);\n  const handleRoleChange = (event, newValue) => {\n    setRoleId(newValue.id);\n  };\n\n  if (loading) {\n    return <div>Loading</div>;\n  }\n\n  console.log(data)\n\n  return (\n    <div style={{ display: \"flex\", justifyContent: \"center\" }}>\n      <Autocomplete\n        id=\"combo-box-demo\"\n        options={data.roles.filter((d) => d.id > 0)}\n        getOptionLabel={(option) => option.name}\n        style={{ width: 300 }}\n        onChange={handleRoleChange}\n        renderInput={(params) => (\n          <TextField\n            {...params}\n            label=\"角色\"\n            variant=\"outlined\"\n            margin=\"dense\"\n          />\n        )}\n      />\n\n      <TextField\n        id=\"standard-basic\"\n        label=\"人數\"\n        variant=\"outlined\"\n        className={classes.margin}\n        margin=\"dense\"\n        type=\"number\"\n        value={roleNumber}\n        onChange={(e) => setRoleNumber(e.target.value)}\n      />\n      <div style={{ marginTop: 5 }}>\n        <Fab\n          size=\"medium\"\n          color=\"secondary\"\n          aria-label=\"add\"\n          size=\"small\"\n          onClick={() => {\n            props.updateRoleNumber({\n              id: roleId,\n              number: parseInt(roleNumber),\n            });\n            /*\n            updateRoleNumber({\n              variables: { id: roleId, number: parseInt(roleNumber) },\n            });\n            */\n          }}\n        >\n          <SaveIcon />\n        </Fab>\n      </div>\n    </div>\n  );\n}\n","export default {\n    CARD: 'card',\n  }","import React, { useRef } from 'react'\nimport { useDrag, useDrop } from 'react-dnd'\nimport ItemTypes from './ItemTypes'\nconst style = {\n  border: '1px dashed gray',\n  padding: '0.5rem 1rem',\n  marginBottom: '.5rem',\n  backgroundColor: 'white',\n  cursor: 'move',\n}\nconst Card = ({ id, text, index, moveCard }) => {\n  const ref = useRef(null)\n  const [, drop] = useDrop({\n    accept: ItemTypes.CARD,\n    hover(item, monitor) {\n      if (!ref.current) {\n        return\n      }\n      const dragIndex = item.index\n      const hoverIndex = index\n      // Don't replace items with themselves\n      if (dragIndex === hoverIndex) {\n        return\n      }\n      // Determine rectangle on screen\n      const hoverBoundingRect = ref.current.getBoundingClientRect()\n      // Get vertical middle\n      const hoverMiddleY =\n        (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2\n      // Determine mouse position\n      const clientOffset = monitor.getClientOffset()\n      // Get pixels to the top\n      const hoverClientY = clientOffset.y - hoverBoundingRect.top\n      // Only perform the move when the mouse has crossed half of the items height\n      // When dragging downwards, only move when the cursor is below 50%\n      // When dragging upwards, only move when the cursor is above 50%\n      // Dragging downwards\n      if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\n        return\n      }\n      // Dragging upwards\n      if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\n        return\n      }\n      // Time to actually perform the action\n      moveCard(dragIndex, hoverIndex)\n      // Note: we're mutating the monitor item here!\n      // Generally it's better to avoid mutations,\n      // but it's good here for the sake of performance\n      // to avoid expensive index searches.\n      item.index = hoverIndex\n    },\n  })\n  const [{ isDragging }, drag] = useDrag({\n    item: { type: ItemTypes.CARD, id, index },\n    collect: (monitor) => ({\n      isDragging: monitor.isDragging(),\n    }),\n  })\n  const opacity = isDragging ? 0 : 1\n  drag(drop(ref))\n  return (\n    <div ref={ref} style={{ ...style, opacity }}>\n      {text}\n    </div>\n  )\n}\nexport default Card","import React, { useState, useCallback } from \"react\";\nimport Card from \"./Card\";\nimport update from \"immutability-helper\";\nconst style = {\n  width: 400,\n};\nconst Container = (props) => {\n  {\n    const [cards, setCards] = useState([...props.data]);\n    const moveCard = useCallback(\n      (dragIndex, hoverIndex) => {\n        const dragCard = cards[dragIndex];\n        const newCards = update(cards, {\n          $splice: [\n            [dragIndex, 1],\n            [hoverIndex, 0, dragCard],\n          ],\n        });\n        setCards(newCards);\n\n        props.onUpdate(newCards)\n      },\n      [cards]\n    );\n    const renderCard = (card, index) => {\n      return (\n        <Card\n          key={card.id}\n          index={index}\n          id={card.id}\n          text={card.text}\n          moveCard={moveCard}\n        />\n      );\n    };\n    return (\n      <>\n        <div style={style}>{cards.map((card, i) => renderCard(card, i))}</div>\n      </>\n    );\n  }\n};\nexport default Container;\n","import React, { useEffect } from \"react\";\nimport {\n  fade,\n  withStyles,\n  makeStyles,\n  createMuiTheme,\n} from \"@material-ui/core/styles\";\nimport Button from \"@material-ui/core/Button\";\nimport { useQuery, useMutation, useLazyQuery } from \"@apollo/client\";\nimport { gql } from \"apollo-boost\";\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\nimport TextField from \"@material-ui/core/TextField\";\nimport PlayerTable from \"./PlayerTable\";\nimport { RoleTable } from \"./RoleTable\";\nimport Fab from \"@material-ui/core/Fab\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport SaveIcon from \"@material-ui/icons/Save\";\nimport Container from \"@material-ui/core/Container\";\nimport AddRole from \"./AddRole\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Tabs from \"@material-ui/core/Tabs\";\nimport Tab from \"@material-ui/core/Tab\";\nimport Box from \"@material-ui/core/Box\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport DragBox from \"../src/drag/Container\";\nimport { DndProvider } from \"react-dnd\";\nimport Backend from \"react-dnd-html5-backend\";\n\nconst GET_TEMPLATE = gql`\n  query GetTemplate($name: String!) {\n    template(name: $name) {\n      roles {\n        name\n        number\n        id\n      }\n      description\n    }\n  }\n`;\n\nconst UPDATE_ROLE_NUMBER = gql`\n  mutation UpdateTempl($roleId: Int!, $number: Int!, $name: String!) {\n    updateTemplateRole(name: $name, number: $number, roleId: $roleId)\n  }\n`;\n\nconst UPDATE_RULE = gql`\n  mutation UpdateRule($name: String!, $description: String!) {\n    updateTemplateDescription(name: $name, description: $description)\n  }\n`;\n\nconst UPDATE_ROLE_PRIORITY = gql`\n  mutation UpdateRolePriority($name: String!, $ids: [Int]!) {\n    updateTemplateRolePriority(name: $name, ids: $ids)\n  }\n`;\n\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`full-width-tabpanel-${index}`}\n      aria-labelledby={`full-width-tab-${index}`}\n      {...other}\n    >\n      {value === index && <Box p={3}>{children}</Box>}\n    </div>\n  );\n}\n\nconst convertToDragData = (data) => {\n  const result = [];\n  data.forEach((d) => {\n    const { name, id } = d;\n    result.push({ id, text: name });\n  });\n  return result;\n};\n\nfunction EditDarkPriority(props) {\n  const { name } = props;\n\n  const [priorityList, setPrioritylist] = React.useState([]);\n  const [orgPriorityList, setOrgPriorityList] = React.useState([]);\n  const [isLoading, setIsLoading] = React.useState(false);\n  const [geTemplate, { loading, error, data, called }] = useLazyQuery(\n    GET_TEMPLATE,\n    { fetchPolicy: \"network-only\" }\n\n    /*\n    onCompleted: (res) => {\n      console.log(\"complete\", res);\n      const idData = convertToDragData(res.template.roles);\n      //setPrioritylist(idData.map((v) => v.id));\n      //setOrgPriorityList(idData.map((v) => v.id));\n    },\n    */\n  );\n\n  console.log(data);\n  const [updateRolePriority, res] = useMutation(UPDATE_ROLE_PRIORITY, {\n    onCompleted: () => {\n      //refetch();\n      console.log(\"update dark\");\n      geTemplate({ variables: { name } });\n    },\n  });\n\n  React.useEffect(() => {\n    geTemplate({ variables: { name } });\n  }, []);\n\n  React.useEffect(() => {\n    if (!loading && called) {\n      const idData = convertToDragData(data.template.roles);\n      setPrioritylist(idData.map((v) => v.id));\n      setOrgPriorityList(idData.map((v) => v.id));\n    }\n  }, [data]);\n\n  if (!called || loading) {\n    return <div>Loading</div>;\n  }\n\n  const dragData = convertToDragData(data.template.roles);\n\n  return (\n    <DndProvider backend={Backend}>\n      <IconButton\n        aria-label=\"delete\"\n        onClick={() => {\n          updateRolePriority({ variables: { name, ids: priorityList } });\n        }}\n        color={\n          orgPriorityList.toString() === priorityList.toString()\n            ? \"primary\"\n            : \"secondary\"\n        }\n      >\n        <SaveIcon />\n      </IconButton>\n      <DragBox\n        data={dragData}\n        onUpdate={(data) => {\n          console.log(\"update view\");\n          setPrioritylist(data.map((v) => v.id));\n        }}\n      />\n    </DndProvider>\n  );\n}\n\nfunction EditRole(props) {\n  const { name, data } = props;\n  const [updateRoleNumber] = useMutation(UPDATE_ROLE_NUMBER);\n\n  React.useEffect(() => {\n    console.log(\"mount\" + name);\n\n    return () => {\n      console.log(\"umount\" + name);\n    };\n  }, []);\n\n  return (\n    <div>\n      <Typography variant=\"h2\" gutterBottom>\n        {name}\n      </Typography>\n      <AddRole\n        updateRoleNumber={({ id: roleId, number }) => {\n          console.log(roleId, name);\n          updateRoleNumber({ variables: { roleId, name, number } });\n        }}\n      />\n\n      <RoleTable data={data} />\n\n      {/*<RoleTable\n        data={data}\n        query={GET_TEMPLATE}\n        variables={{ name }}\n        parseData={(d) => {\n            console.log(d)\n          return d.template.roles;\n        }}\n        pollInterval={500}\n      />*/}\n    </div>\n  );\n}\n\nfunction EditRuleCore(props) {\n  const [value, setValue] = React.useState(props.value);\n  return (\n    <div>\n      <IconButton\n        aria-label=\"delete\"\n        onClick={() => {\n          props.updateRule({\n            variables: { description: value, name: props.name },\n          });\n        }}\n        color={value === props.value ? \"primary\" : \"secondary\"}\n      >\n        <SaveIcon />\n      </IconButton>\n      <TextField\n        id=\"outlined-multiline-static\"\n        multiline\n        rows={4}\n        fullWidth\n        value={value}\n        variant=\"outlined\"\n        onChange={(e) => setValue(e.target.value)}\n      />\n    </div>\n  );\n}\n\nfunction EditRule(props) {\n  const { name } = props;\n\n  const { loading, error, data, refetch } = useQuery(GET_TEMPLATE, {\n    variables: { name },\n  });\n\n  const [updateRule, ruleResult] = useMutation(UPDATE_RULE, {\n    onCompleted: () => {\n      refetch();\n    },\n  });\n\n  if (loading) {\n    return <div>Loading</div>;\n  }\n\n  return (\n    <EditRuleCore\n      value={data.template.description}\n      updateRule={updateRule}\n      name={name}\n    />\n  );\n}\n\nexport default function EditTemplate(props) {\n  const { name, data } = props;\n\n  const [value, setValue] = React.useState(0);\n\n  const handleChange = (event, newValue) => {\n    setValue(newValue);\n  };\n\n  return (\n    <Paper square>\n      <Tabs\n        value={value}\n        indicatorColor=\"primary\"\n        textColor=\"primary\"\n        onChange={handleChange}\n        aria-label=\"disabled tabs example\"\n      >\n        <Tab label=\"角色\" />\n        <Tab label=\"規則\" />\n        <Tab label=\"黑夜順序\" />\n      </Tabs>\n      <TabPanel value={value} index={0}>\n        <EditRole name={name} data={data} />\n      </TabPanel>\n      <TabPanel value={value} index={1}>\n        <EditRule name={name} />\n      </TabPanel>\n      <TabPanel value={value} index={2}>\n        <EditDarkPriority name={name} />\n      </TabPanel>\n    </Paper>\n  );\n}\n","import React from \"react\";\nimport {\n  fade,\n  withStyles,\n  makeStyles,\n  createMuiTheme,\n} from \"@material-ui/core/styles\";\nimport Button from \"@material-ui/core/Button\";\nimport { useQuery, useMutation, useLazyQuery} from \"@apollo/client\";\nimport { gql } from \"apollo-boost\";\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\nimport TextField from \"@material-ui/core/TextField\";\nimport PlayerTable from \"./PlayerTable\";\nimport RoleTable from \"./RoleTable\";\nimport Fab from \"@material-ui/core/Fab\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport SaveIcon from \"@material-ui/icons/Save\";\nimport CreateIcon from \"@material-ui/icons/Create\";\nimport Container from \"@material-ui/core/Container\";\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableContainer from \"@material-ui/core/TableContainer\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport Paper from \"@material-ui/core/Paper\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport AddRole from \"./AddRole\";\nimport EditTemplateRole from \"./EditTemplateRole\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport Box from \"@material-ui/core/Box\";\nconst useStyles = makeStyles((theme) => ({\n  margin: {\n    margin: theme.spacing(1),\n  },\n  table: {\n    minWidth: 250,\n  },\n  title: {\n    flexGrow: 1,\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n}));\n\nconst GET_TEMPLATES = gql`\n  {\n    templates {\n      isEnabled\n      name\n    }\n  }\n`;\n\nconst ADD_TEMPLATE = gql`\n  mutation addTemplate($name: String!) {\n    addNewTemplate(name: $name)\n  }\n`;\n\nconst DELETE_TEMPLATE = gql`\n  mutation DeleteTemplate($name: String!) {\n    deleteTemplate(name: $name)\n  }\n`;\n\nconst ENABLE_TEMPLATE = gql`\n  mutation EnableTemplate($name: String!) {\n    enableTemplate(name: $name)\n  }\n`;\n\nfunction TemplateControl(props) {\n  const classes = useStyles();\n\n  return (\n    <TableContainer component={Paper}>\n      <Table className={classes.table} aria-label=\"simple table\" size=\"small\">\n        <TableHead>\n          <TableRow>\n            <TableCell>選擇</TableCell>\n            <TableCell align=\"left\">遊戲模式</TableCell>\n            <TableCell align=\"right\">\n              <div style={{ marginRight: 10 }}>編輯</div>\n            </TableCell>\n            <TableCell align=\"right\">\n              <div style={{ marginRight: 10 }}>刪除</div>\n            </TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {props.data.map((row) => (\n            <TableRow key={row.name}>\n              <TableCell>\n                <Checkbox\n                  onChange={(e) => {\n                    if (e.target.checked) {\n                      props.onSelect(row.name);\n                    }\n                  }}\n                  color=\"primary\"\n                  inputProps={{ \"aria-label\": \"secondary checkbox\" }}\n                  checked={row.isEnabled}\n                />\n              </TableCell>\n              <TableCell align=\"left\">{row.name}</TableCell>\n              <TableCell align=\"right\">\n                <IconButton\n                  aria-label=\"delete\"\n                  onClick={() => {\n                    console.log(row.name);\n                    props.onEdit(row.name);\n                  }}\n                  disabled={!row.isEnabled}\n                >\n                  <CreateIcon />\n                </IconButton>\n              </TableCell>\n              <TableCell align=\"right\">\n                <IconButton\n                  aria-label=\"delete\"\n                  onClick={() => {\n                    //props.onEdit(row.name);\n                    props.onDelete(row.name);\n                  }}\n                  disabled={row.isEnabled}\n                >\n                  <DeleteIcon />\n                </IconButton>\n              </TableCell>\n            </TableRow>\n          ))}\n        </TableBody>\n      </Table>\n    </TableContainer>\n  );\n}\n\nfunction TemplateTable(props) {\n  const classes = useStyles();\n  \n  const [addTemplate] = useMutation(ADD_TEMPLATE);\n  const [deleteTemplate] = useMutation(DELETE_TEMPLATE);\n  const [name, setName] = React.useState(\"\");\n  const [isBusy, setIsBusy] = React.useState(false);\n\n\n  /*\n  const [getTemplate ,{ loading, error, data, stopPolling, startPolling, called }] = useLazyQuery(\n    GET_TEMPLATES\n  );\n    */\n\n\n  const [enableTemplate, enableResult] = useMutation(ENABLE_TEMPLATE, {\n    onCompleted: () => {\n\n      /*\n      setIsBusy(true);\n      startPolling(500);\n      setTimeout(() => {\n        setIsBusy(false);\n      }, 2000);\n      */\n    },\n  });\n\n\n  /*\n  React.useEffect(() => {\n    //startPolling(500); // will be called only once\n    return stopPolling; // just return cleanup function without making new one\n  }, []);\n\n  if (loading ) {\n    return <div>Loading</div>;\n  }\n\n\n  if (loading || enableResult.loading || isBusy) {\n    return <div>Loading</div>;\n  }\n  */\n \n\n  return (\n    <div>\n      <div style={{ display: \"flex\", justifyContent: \"center\" }}>\n        <TextField\n          id=\"standard-basic\"\n          label=\"模式名稱\"\n          variant=\"outlined\"\n          className={classes.margin}\n          margin=\"dense\"\n          value={name}\n          onChange={(e) => setName(e.target.value)}\n        />\n\n        <div style={{ marginTop: 5 }}>\n          <Fab\n            size=\"medium\"\n            color=\"secondary\"\n            aria-label=\"add\"\n            size=\"small\"\n            onClick={() => {\n              addTemplate({ variables: { name } });\n            }}\n          >\n            <AddIcon />\n          </Fab>\n        </div>\n      </div>\n      <Container maxWidth=\"sm\">\n        <TemplateControl\n          data={props.data.templates}\n          onEdit={(name) => {\n            props.setEditName(name);\n          }}\n          onSelect={(name) => {\n            enableTemplate({ variables: { name } });\n            //stopPolling();\n          }}\n          onDelete={(name) => {\n            deleteTemplate({ variables: { name } });\n          }}\n        />\n        </Container>\n    </div>\n  );\n}\n\nexport default function Admin(props) {\n  const classes = useStyles();\n\n  const [name, setName] = React.useState(\"\");\n  const [editName, setEditName] = React.useState(\"\");\n  const [addTemplate] = useMutation(ADD_TEMPLATE);\n  const [deleteTemplate] = useMutation(DELETE_TEMPLATE);\n  const [isBusy, setIsBusy] = React.useState(false);\n\n  console.log()\n\n  /*\n  const { loading, error, data, stopPolling, startPolling, called } = useQuery(\n    GET_TEMPLATES,\n    {\n      pollInterval: 500,\n      //notifyOnNetworkStatusChange:true\n    }\n  );\n  const [enableTemplate, enableResult] = useMutation(ENABLE_TEMPLATE, {\n    onCompleted: () => {\n      setIsBusy(true);\n      startPolling(500);\n      setTimeout(() => {\n        setIsBusy(false);\n      }, 2000);\n    },\n  });\n\n\n  if (loading || enableResult.loading || isBusy) {\n    return <div>Loading</div>;\n  }\n  */\n\n  if (editName) {\n    return (\n      <div>\n        <Box display=\"flex\">\n          <Button\n            variant=\"contained\"\n            color=\"secondary\"\n            onClick={() => {\n              setEditName(\"\");\n            }}\n          >\n            退出\n          </Button>\n        </Box>\n        <EditTemplateRole name={editName} data={props.data}/>\n      </div>\n    );\n  }\n\n  return (\n    <TemplateTable setEditName={name=>{setEditName(name)}} data={props.tData}/>\n  );\n}\n","import React from \"react\";\nimport {\n  fade,\n  withStyles,\n  makeStyles,\n  createMuiTheme,\n} from \"@material-ui/core/styles\";\nimport Button from \"@material-ui/core/Button\";\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport { gql } from \"apollo-boost\";\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\nimport TextField from \"@material-ui/core/TextField\";\nimport PlayerTable from \"./PlayerTable\";\n//import RoleTable from \"./RoleTable\";\nimport Fab from \"@material-ui/core/Fab\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport SaveIcon from \"@material-ui/icons/Save\";\nimport Container from \"@material-ui/core/Container\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Tabs from \"@material-ui/core/Tabs\";\nimport Tab from \"@material-ui/core/Tab\";\nimport Box from \"@material-ui/core/Box\";\nimport Admin from \"./Admin\";\nimport Typography from \"@material-ui/core/Typography\";\n\nimport {BaseTable as BaseRoleTable} from \"./RoleTable\";\n\nconst GET_ENABLED_TEMPLATE = gql`\n  {\n    enabledTemplate {\n      name\n      description\n      roles {\n        name\n        id\n        number\n      }\n    }\n  }\n`;\n\n\n\nexport default function EnabledTemplate(props) {\n\n  /*\n    const { loading, error, data } = useQuery(GET_ENABLED_TEMPLATE, {\n      fetchPolicy: \"network-only\",\n    });\n  \n    if (loading) {\n      return <div>Loading</div>;\n    }\n  \n   */\n    const { name, description ,roles} = props.data.enabledTemplate;\n\n    \n    return (\n      <div>\n        <Typography variant=\"h2\" gutterBottom>\n          {name}\n        </Typography>\n        <TextField\n          id=\"outlined-multiline-static\"\n          multiline\n          rows={6}\n          fullWidth\n          value={description || \"\"}\n          variant=\"outlined\"\n          label=\"規則\"\n          disabled\n          \n        />\n       <BaseRoleTable data={roles}/>\n      </div>\n    );\n  }\n\n\n\n","import React, { useEffect } from \"react\";\nimport {\n  fade,\n  withStyles,\n  makeStyles,\n  createMuiTheme,\n} from \"@material-ui/core/styles\";\nimport { useHistory } from \"react-router-dom\";\nimport Button from \"@material-ui/core/Button\";\nimport { useQuery, useMutation, useLazyQuery } from \"@apollo/client\";\nimport { gql } from \"apollo-boost\";\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\nimport TextField from \"@material-ui/core/TextField\";\nimport PlayerTable from \"./PlayerTable\";\nimport DarkPlayerTable from \"./DarkPlayerTable\";\nimport { RoleTable } from \"./RoleTable\";\nimport Fab from \"@material-ui/core/Fab\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport SaveIcon from \"@material-ui/icons/Save\";\nimport Container from \"@material-ui/core/Container\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Tabs from \"@material-ui/core/Tabs\";\nimport Tab from \"@material-ui/core/Tab\";\nimport Box from \"@material-ui/core/Box\";\nimport Admin from \"./Admin\";\nimport Typography from \"@material-ui/core/Typography\";\nimport EnabedTemplateInfo from \"./EnabledTemplateInfo\";\nimport { useDebounce, useDebounceCallback } from \"@react-hook/debounce\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport Radio from \"@material-ui/core/Radio\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nconst GET_ROLES = gql`\n  {\n    templates {\n      isEnabled\n      name\n    }\n    enabledTemplate {\n      name\n      description\n      roles {\n        name\n        id\n        number\n      }\n    }\n    players {\n      isTarget\n      id\n      name\n      roleName\n      vote\n      chiefVote\n      isEmpty\n      isDie\n      isVoteFinish\n      votedNumber\n      chiefVoteState {\n        isDropedOut\n        isCandidate\n      }\n    }\n    gameInfo(id: 0) {\n      isVoteFinish\n      chiefId\n      isDark\n      voteWeightedId\n      hasVoteTarget\n    }\n  }\n`;\n\nconst UPDATE_PLAYER_NAME = gql`\n  mutation UpdatePlayerName($id: Int!, $name: String!) {\n    updatePlayerName(id: $id, name: $name)\n  }\n`;\n\nconst GENERATE_TEMPLATE_ROLE = gql`\n  mutation GenerateTemplateRole {\n    generateTemplateRole\n  }\n`;\n\nconst GENERATE_TEMPLATE_PLAYER = gql`\n  mutation GenerateTemplatePlayer {\n    generateTemplatePlayer\n  }\n`;\n\nconst REMOVE_ALL_PLAYER = gql`\n  mutation RemoveAllPlayer {\n    removeAllPlayer\n  }\n`;\n//enableTemplate(name:\"777\")\n\nconst VOTE_START = gql`\n  mutation VoteStart($targets: [Int]) {\n    voteStart(targets: $targets)\n  }\n`;\n\nconst VOTE_CHIEF_START = gql`\n  mutation VoteChiefStart {\n    voteChiefStart\n  }\n`;\n\nconst useStyles = makeStyles((theme) => ({\n  margin: {\n    margin: theme.spacing(1),\n  },\n  table: {\n    minWidth: 250,\n  },\n  title: {\n    flexGrow: 1,\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n}));\n\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`full-width-tabpanel-${index}`}\n      aria-labelledby={`full-width-tab-${index}`}\n      {...other}\n    >\n      {value === index && <Box p={3}>{children}</Box>}\n    </div>\n  );\n}\n\nconst parseData = (data) => {\n  const playerGroup = {};\n\n  data.players.forEach((p) => {\n    const { roleName, name, id } = p;\n    if (playerGroup[roleName]) {\n      playerGroup[roleName].push({ name: name || \"\", id });\n    } else {\n      playerGroup[roleName] = [{ name: name || \"\", id }];\n    }\n  });\n\n  const result = [];\n\n  data.enabledTemplate.roles.forEach((r) => {\n    const { name } = r;\n    result.push({ ...r, players: playerGroup[name] });\n  });\n\n  return result;\n};\n\nfunction TemplateRoleTable(props) {\n  return <RoleTable data={props.data} />;\n\n  /*\n  return (\n    <RoleTable\n\n      query={GET_ENABLED_TEMPLATE}\n      variables={{}}\n      parseData={(data) => {\n        const playerGroup = {};\n\n        data.players.forEach((p) => {\n          const { roleName, name, id } = p;\n          if (playerGroup[roleName]) {\n            playerGroup[roleName].push({ name: name || \"\", id });\n          } else {\n            playerGroup[roleName] = [{ name: name || \"\", id }];\n          }\n        });\n\n        console.log(playerGroup);\n\n        const result = [];\n\n        data.enabledTemplate.roles.forEach((r) => {\n          console.log(\"r\", r);\n\n          const { name } = r;\n          result.push({ ...r, players: playerGroup[name] });\n        });\n\n        console.log(result);\n\n        return result;\n      }}\n      pollInterval={500}\n    />\n  );\n  */\n}\n\nfunction VoteAction(props) {\n  const [targetList, setTargetList] = React.useState([]);\n  const [voteStart] = useMutation(\n    props.hasChief  || props.hasVoteTarget?  VOTE_START : VOTE_CHIEF_START,\n    {\n      onCompleted: () => {\n        props.onClose();\n      },\n    }\n  );\n  //const [submitVote, { called }] = useMutation(SUBMIT_VOTE);\n\n\n  const isLock = props.hasTarget || props.hasChief;\n\n  return (\n    <>\n      <DialogContent>\n        <DialogContentText id=\"alert-dialog-slide-description\">\n          {`${\n            props.hasChief ? `請選擇放逐的目標` : `請選擇警長候選人`\n          }, 目標必須多於一人, 投票人數也必須多於一人`}\n        </DialogContentText>\n        {props.players\n          .filter((p) => {\n\n\n            if (props.hasVoteTarget) {\n              return p.isTarget;\n            }else if (!props.hasChief) {\n              return (\n                p.chiefVoteState.isCandidate && !p.chiefVoteState.isDropedOut\n              );\n            }\n\n            return !p.isDie && p.id !== 0;\n          })\n          .map((player) => (\n            <div key={player.id}>\n              <Radio\n                checked={targetList.includes(player.id)}\n                name=\"radio-button-demo\"\n                inputProps={{ \"aria-label\": \"B\" }}\n                onClick={() => {\n                  if (\n                    !targetList.includes(player.id) &&\n                    targetList.length + 1 !==\n                      props.players.filter((p) => !p.isDie && p.id !== 0).length\n                  ) {\n                    setTargetList([...targetList, player.id]);\n                  }\n                }}\n              />\n              {` ${player.id} : ${player.name || \"\"}`}\n            </div>\n          ))}\n        <Radio\n          checked={targetList.length === 0}\n          name=\"radio-button-demo\"\n          inputProps={{ \"aria-label\": \"B\" }}\n          onClick={() => {\n\n            if (!isLock) {\n              setTargetList([]);\n            }\n            \n          }}\n        />\n        {`所有人`}\n      </DialogContent>\n      <DialogActions>\n        {(targetList.length === 0 || targetList.length > 1) && (\n          <Button\n            onClick={() => {\n              voteStart({ variables: { targets: targetList } });\n              //submitVote({variables:{id:props.id, target}})\n            }}\n            color=\"primary\"\n          >\n            確認\n          </Button>\n        )}\n      </DialogActions>\n    </>\n  );\n}\n\nfunction Game(props) {\n  const classes = useStyles();\n\n  //const [updateRoleNumber] = useMutation(UPDATE_ROLE_NUMBER);\n\n  const [generateRole] = useMutation(GENERATE_TEMPLATE_ROLE);\n  const [generatePlayer] = useMutation(GENERATE_TEMPLATE_PLAYER);\n  const [removeAllPlayer] = useMutation(REMOVE_ALL_PLAYER);\n  const [voteStart] = useMutation(VOTE_START);\n  //const [roleId, setRoleId] = React.useState(-1);\n  //const [roleNumber, setRoleNumber] = React.useState(0);\n  const [isOpen, setIsOpen] = React.useState(false);\n  const [value, setValue] = useDebounce(props.name, 500);\n  const [name, setName] = React.useState(props.name || \"\");\n  const [updatePlayerName, { called }] = useMutation(UPDATE_PLAYER_NAME);\n\n  React.useEffect(() => {\n    if (value && (value !== props.name || called)) {\n      updatePlayerName({\n        variables: { id: 0, name: value },\n      });\n    }\n  }, [value]);\n  /*\n  const handleRoleChange = (event, newValue) => {\n    setRoleId(newValue.id);\n  };\n  */\n\n  const hasChief = props.chiefId !== -1;\n\n  if (props.isPlayerMode) {\n    if (props.isDark) {\n      return (\n        <DarkPlayerTable\n          data={props.players}\n          chiefId={props.chiefId}\n          voteWeightedId={props.voteWeightedId}\n        />\n      );\n    }\n\n    return (\n      <>\n        <Dialog\n          aria-labelledby=\"simple-dialog-title\"\n          open={isOpen}\n          onClose={() => {\n            setIsOpen(false);\n          }}\n        >\n          <DialogTitle id=\"form-dialog-title\">\n            {hasChief ? `放逐開始` : `競選警長`}\n          </DialogTitle>\n          <VoteAction\n            players={props.players}\n            onClose={() => {\n              setIsOpen(false);\n            }}\n            hasChief={hasChief}\n            hasVoteTarget={props.hasVoteTarget}\n          />\n        </Dialog>\n        <Box display=\"flex\">\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            onClick={() => {\n              generateRole();\n            }}\n          >\n            產生角色\n          </Button>\n          <Button\n            variant=\"contained\"\n            color=\"secondary\"\n            onClick={() => {\n              removeAllPlayer();\n            }}\n          >\n            刪除玩家\n          </Button>\n          <Button\n            variant=\"contained\"\n            color=\"secondary\"\n            onClick={() => {\n              //voteStart();\n              setIsOpen(true);\n            }}\n          >\n            {hasChief ? `放逐` : `警長`}\n          </Button>\n        </Box>\n        <Box display=\"flex\">\n          <TextField\n            id=\"standard-basic\"\n            label=\"姓名\"\n            variant=\"outlined\"\n            margin=\"dense\"\n            value={name}\n            onChange={(e) => {\n              setValue(e.target.value);\n              setName(e.target.value);\n            }}\n          />\n        </Box>\n        <PlayerTable\n          data={props.players}\n          chiefId={props.chiefId}\n          voteWeightedId={props.voteWeightedId}\n        />\n      </>\n    );\n  }\n\n  return (\n    <div style={{}}>\n      <Box display=\"flex\">\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          onClick={() => {\n            generatePlayer();\n          }}\n        >\n          加入玩家\n        </Button>\n      </Box>\n      <EnabedTemplateInfo data={props.data} />\n    </div>\n  );\n}\n\nexport default function God(props) {\n  const history = useHistory();\n  const [value, setValue] = React.useState(0);\n  const [getRole, { loading, data, error, called }] = useLazyQuery(GET_ROLES, {\n    fetchPolicy: \"network-only\",\n  });\n  const handleChange = (event, newValue) => {\n    setValue(newValue);\n  };\n\n  let isMounted = true;\n  useEffect(() => {\n    if (isMounted) {\n      getRole();\n    }\n\n    const interval = setInterval(() => {\n      if (isMounted) {\n        getRole();\n      }\n    }, 500);\n\n    return () => {\n      clearInterval(interval);\n      isMounted = false;\n    };\n  }, []);\n\n  React.useEffect(() => {\n    if (error && !loading) {\n      error.graphQLErrors.forEach((e) => {\n        const { extensions } = e;\n        if (extensions.code === \"UNAUTHENTICATED\") {\n          console.log(\"no access!!!\");\n          history.push(\"/\");\n        }\n      });\n\n      console.log(\"set dark\");\n\n      if (data && data.gameInfo.isDark) {\n        props.setDarkMode(true);\n      }\n    }\n  }, [error, loading, data]);\n\n  React.useEffect(() => {\n    if (data) {\n      props.setDarkMode(data.gameInfo.isDark);\n    }\n  }, [data]);\n\n  if (!called || !data) {\n    return <div>Loading</div>;\n  }\n\n  const { id, pass, name } = props;\n\n  const isPlayerMode = data.players.length > 1 ? true : false;\n  console.log(data);\n  return (\n    <Container maxWidth={isPlayerMode && value === 0 ? \"lg\" : \"sm\"}>\n      <Paper elevation={3}>\n        <Tabs\n          value={value}\n          indicatorColor=\"primary\"\n          textColor=\"primary\"\n          onChange={handleChange}\n          aria-label=\"disabled tabs example\"\n          variant=\"fullWidth\"\n        >\n          <Tab label=\"遊戲\" />\n          <Tab label={isPlayerMode ? \"黑夜視野\" : \"模式選擇\"} />\n          {isPlayerMode && <Tab label=\"模式\" />}\n        </Tabs>\n        <TabPanel value={value} index={0}>\n          <Game\n            isPlayerMode={isPlayerMode}\n            id={id}\n            pass={pass}\n            name={name}\n            players={data.players}\n            chiefId={data.gameInfo.chiefId}\n            isDark={data.gameInfo.isDark}\n            voteWeightedId={data.gameInfo.voteWeightedId}\n            data={data}\n          />\n        </TabPanel>\n        <TabPanel value={value} index={1}>\n          {isPlayerMode ? (\n            <TemplateRoleTable data={parseData(data)} />\n          ) : (\n            <Admin data={parseData(data)} tData={data} />\n          )}\n        </TabPanel>\n\n        {isPlayerMode && (\n          <TabPanel value={value} index={2}>\n            <EnabedTemplateInfo data={data} />\n          </TabPanel>\n        )}\n      </Paper>\n    </Container>\n  );\n}\n","import React, { useEffect } from \"react\";\nimport logo from \"./logo.svg\";\nimport \"./App.css\";\nimport Button from \"@material-ui/core/Button\";\nimport Select from \"react-select\";\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Fab from \"@material-ui/core/Fab\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport { gql } from \"apollo-boost\";\nimport { useQuery, useMutation, useLazyQuery } from \"@apollo/client\";\n\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableContainer from \"@material-ui/core/TableContainer\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport Typography from \"@material-ui/core/Typography\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport Box from \"@material-ui/core/Box\";\nimport Container from \"@material-ui/core/Container\";\nimport Tabs from \"@material-ui/core/Tabs\";\nimport Tab from \"@material-ui/core/Tab\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport Avatar from \"react-avatar\";\nimport Radio from \"@material-ui/core/Radio\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport {\n  fade,\n  withStyles,\n  makeStyles,\n  createMuiTheme,\n} from \"@material-ui/core/styles\";\nimport { useDebounce, useDebounceCallback } from \"@react-hook/debounce\";\n\nimport EnabedTemplateInfo from \"./EnabledTemplateInfo\";\nimport { useHistory } from \"react-router-dom\";\n\nconst useStyles = makeStyles((theme) => ({\n  margin: {\n    //margin: theme.spacing(1),\n  },\n  table: {\n    minWidth: 450,\n  },\n  title: {\n    flexGrow: 1,\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2),\n  },\n  container: {\n    paddingTop: theme.spacing(4),\n    paddingBottom: theme.spacing(4),\n  },\n}));\n\nconst GET_PLAYER_INFO = gql`\n  query GetPlayer($id: Int!, $pass: String!) {\n    player(id: $id, pass: $pass) {\n      id\n      name\n      roleName\n    }\n    players(id: $id) {\n      id\n      name\n      isEmpty\n      revealedRole\n      isDie\n      vote\n      chiefVote\n      isValidCandidate\n      isVoteFinish\n    }\n    wolfKillList(id: $id) {\n      id\n      isKill\n    }\n    gameInfo(id: $id) {\n      isVoteFinish\n      chiefId\n      isDark\n      chiefVoteState {\n        isDropedOut\n        isCandidate\n      }\n    }\n    darkInfo(id: $id) {\n      isStart\n      remainTime\n      actRoleType\n      darkDay\n      targetList {\n        id\n        isKill\n      }\n    }\n  }\n`;\n\nconst SUBMIT_VOTE = gql`\n  mutation SubmitVote($target: Int!) {\n    submitVote(target: $target)\n  }\n`;\n\nconst UPDATE_PLAYER_NAME = gql`\n  mutation UpdatePlayerName($id: Int!, $name: String!) {\n    updatePlayerName(id: $id, name: $name)\n  }\n`;\n\nconst DARK_ACTION = gql`\n  mutation DarkAction($targetId: Int!, $id: Int!) {\n    exeDarkAction(targetId: $targetId, id: $id)\n  }\n`;\n\nconst SUBMIT_CHIEF_CANDIDATE = gql`\n  mutation submitChiefCandidate {\n    setIsChiefCandidate\n  }\n`;\n\nconst DROP_OUT_CHIEF_CANDIDATE = gql`\n  mutation dropOutChiefCandidate {\n    setIsChiefDropOut\n  }\n`;\n\nconst GET_ENABLED_TEMPLATE = gql`\n  {\n    enabledTemplate {\n      name\n      description\n      roles {\n        name\n        id\n        number\n      }\n    }\n  }\n`;\n\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`full-width-tabpanel-${index}`}\n      aria-labelledby={`full-width-tab-${index}`}\n      {...other}\n    >\n      {value === index && <Box p={3}>{children}</Box>}\n    </div>\n  );\n}\n\nfunction PlayerTable(props) {\n  const classes = useStyles();\n\n  return (\n    <TableContainer component={Paper}>\n      <Table className={classes.table} aria-label=\"simple table\" size=\"small\">\n        <TableHead>\n          <TableRow>\n            <TableCell>ID</TableCell>\n\n            <TableCell align=\"center\">玩家</TableCell>\n            <TableCell align=\"center\">警長</TableCell>\n            <TableCell align=\"center\">放逐</TableCell>\n            <TableCell align=\"right\">狀態</TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {props.data.map((row) => (\n            <TableRow key={row.id}>\n              <TableCell component=\"th\" scope=\"row\">\n                {row.id === 0 ? (\n                  `♾️`\n                ) : row.isDie ? (\n                  <span aria-label=\"paw\" style={{ fontSize: 30 }}>\n                    🐾\n                  </span>\n                ) : (\n                  row.id\n                )}\n                {row.id === props.chiefId && row.id !== 0 && (\n                  <span aria-label=\"paw\" style={{ fontSize: 30 }}>\n                    🌟\n                  </span>\n                )}\n              </TableCell>\n              <TableCell align=\"center\">{row.name}</TableCell>\n              <TableCell align=\"right\">{row.chiefVote.toString()}</TableCell>\n              <TableCell align=\"right\">{row.vote.toString()}</TableCell>\n              <TableCell align=\"right\">\n                <span\n                  style={{\n                    color: row.isEmpty\n                      ? \"gray\"\n                      : row.isVoteFinish\n                      ? \"lightgreen\"\n                      : \"orange\",\n                    transition: \"all .3s ease\",\n                    fontSize: \"24px\",\n                    marginRight: \"10px\",\n                  }}\n                >\n                  &#x25cf;\n                </span>\n              </TableCell>\n            </TableRow>\n          ))}\n        </TableBody>\n      </Table>\n    </TableContainer>\n  );\n}\n\nconst dialogContent = {\n  WITCH_KILL: { text: \"女巫毒人中\", music: new Audio(\"/witch_kill.mp3\") },\n  WITCH_SAVE: { text: \"女巫救人中\", music: new Audio(\"/witch_save.mp3\") },\n  WOLF: { text: \"狼人正在忙碌的殺人 請稍後\", music: new Audio(\"/wolf.mp3\") },\n  PROPHET: { text: \"預言家驗人\", music: new Audio(\"/prophet.mp3\") },\n  HUNTER: { text: \"獵人獵殺\", music: new Audio(\"/hunter.mp3\") },\n  GUARD: { text: \"守衛守人\", music: new Audio(\"/guard.mp3\") },\n};\n\nfunction DarkAction(props) {\n  const [darkActon] = useMutation(DARK_ACTION);\n  const seletingList = props.data.darkInfo.targetList.filter(\n    (v) => v.isKill === true\n  );\n\n  console.log(seletingList);\n  //const [actRoleType, setActRoleType] = React.useState()\n  const { actRoleType } = props.data.darkInfo;\n\n  React.useEffect(() => {\n    console.log(\"rerender\");\n    dialogContent[actRoleType].music.play();\n\n    return () => {\n      dialogContent[actRoleType].music.pause();\n    };\n  }, [actRoleType]);\n\n  return (\n    <DialogContent>\n      <DialogTitle id=\"simple-dialog-title\">\n        \b第 {props.data.darkInfo.darkDay} 夜\n      </DialogTitle>\n\n      <DialogContentText id=\"alert-dialog-description\">\n        {dialogContent[actRoleType].text}\n      </DialogContentText>\n      {props.data.darkInfo.remainTime}\n\n      {props.data.darkInfo.targetList.length !== 0 && (\n        <>\n          {props.data.darkInfo.targetList.map((v, idx) => (\n            <div key={idx}>\n              <Radio\n                checked={v.isKill ? true : false}\n                name=\"radio-button-demo\"\n                inputProps={{ \"aria-label\": \"B\" }}\n                onClick={() => {\n                  console.log(v.id);\n                  darkActon({ variables: { targetId: v.id, id: props.id } });\n                }}\n              />\n              {`player ${v.id}`}\n            </div>\n          ))}\n          <Radio\n            checked={seletingList.length === 0 ? true : false}\n            name=\"radio-button-demo\"\n            inputProps={{ \"aria-label\": \"B\" }}\n            onChange={() => {\n              darkActon({ variables: { targetId: -1, id: props.id } });\n            }}\n          />\n          {`none`}\n        </>\n      )}\n    </DialogContent>\n  );\n}\n\nfunction VoteAction(props) {\n  const [target, setTarget] = React.useState(-1);\n\n  const [submitVote, { called }] = useMutation(SUBMIT_VOTE);\n\n  return (\n    <>\n      <DialogContent>\n        {props.players\n          .filter((p) => p.isValidCandidate)\n          .map((player) => (\n            <div key={player.id}>\n              <Radio\n                checked={player.id === target}\n                name=\"radio-button-demo\"\n                inputProps={{ \"aria-label\": \"B\" }}\n                onClick={() => {\n                  setTarget(player.id);\n                }}\n              />\n              {` ${player.id} : ${player.name || \"\"}`}\n            </div>\n          ))}\n        <Radio\n          checked={-1 === target}\n          name=\"radio-button-demo\"\n          inputProps={{ \"aria-label\": \"B\" }}\n          onClick={() => {\n            setTarget(-1);\n          }}\n        />\n        {`棄權`}\n      </DialogContent>\n      <DialogActions>\n        <Button\n          onClick={() => {\n            submitVote({ variables: { target } });\n          }}\n          color=\"primary\"\n        >\n          確認\n        </Button>\n      </DialogActions>\n    </>\n  );\n}\n\nfunction CandidateChiefDialog(props) {\n  const [submitChiefCandidate] = useMutation(SUBMIT_CHIEF_CANDIDATE, {\n    onCompleted: () => {\n      props.onClose();\n    },\n  });\n\n  const [dropOutChiefCandidate] = useMutation(DROP_OUT_CHIEF_CANDIDATE, {\n    onCompleted: () => {\n      props.onClose();\n    },\n  });\n\n  return (\n    <>\n      {props.isCandidate ? (\n        <DialogTitle id=\"form-dialog-title\">是否退水？</DialogTitle>\n      ) : (\n        <DialogTitle id=\"form-dialog-title\">是否競選警長？</DialogTitle>\n      )}\n      <DialogContent>\n        <DialogActions>\n          <Button\n            onClick={() => {\n              if (props.isCandidate) {\n                dropOutChiefCandidate();\n              } else {\n                submitChiefCandidate();\n              }\n            }}\n            color=\"primary\"\n          >\n            確認\n          </Button>\n          <Button\n            onClick={() => {\n              props.onClose();\n            }}\n            color=\"secondary\"\n          >\n            取消\n          </Button>\n        </DialogActions>\n      </DialogContent>\n    </>\n  );\n}\n\nfunction PlayerControl(props) {\n  const classes = useStyles();\n  const history = useHistory();\n\n  const [\n    playerInfo,\n    { loading, error, data, called: playerCalled },\n  ] = useLazyQuery(GET_PLAYER_INFO, { fetchPolicy: \"network-only\" });\n\n  const [openChiefCandidate, setOpenChiefCandidate] = React.useState(false);\n  const [value, setValue] = useDebounce(props.name, 500);\n  const [name, setName] = React.useState(props.name);\n  const [updatePlayerName, { called }] = useMutation(UPDATE_PLAYER_NAME);\n\n  let isMounted = true;\n  useEffect(() => {\n    if (isMounted) {\n      playerInfo({ variables: { id: props.id, pass: props.pass } });\n    }\n\n    const interval = setInterval(() => {\n      if (isMounted) {\n        playerInfo({ variables: { id: props.id, pass: props.pass } });\n      }\n    }, 500);\n\n    return () => {\n      clearInterval(interval);\n      isMounted = false;\n    };\n  }, []);\n\n  React.useEffect(() => {\n    if (value && (value !== props.name || called)) {\n      updatePlayerName({\n        variables: { id: props.id, name: value },\n      });\n    }\n\n    if (error && !loading) {\n      history.push(\"/\");\n    }\n\n    //audioEl.play()\n  }, [value, error, loading]);\n\n  React.useEffect(() => {\n    if (data) {\n      props.setDarkMode(data.gameInfo.isDark);\n    }\n  }, [data]);\n\n  if (!playerCalled || !data) {\n    return <div>Loading</div>;\n  }\n\n  const hasChief = data.gameInfo.chiefId !== -1;\n  const { id, name: playerName, roleName } = data.player;\n  return (\n    <>\n      <Dialog\n        aria-labelledby=\"simple-dialog-title\"\n        open={!data.gameInfo.isVoteFinish}\n      >\n        <DialogTitle id=\"form-dialog-title\">\n          {hasChief ? `放逐玩家` : `選擇警長`}\n        </DialogTitle>\n        <VoteAction players={data.players} id={id} />\n      </Dialog>\n\n      {!hasChief && <Box display=\"flex\">\n        {data.gameInfo.chiefVoteState ? (\n          <>\n            <Dialog\n              aria-labelledby=\"simple-dialog-title\"\n              open={openChiefCandidate}\n              \n            >\n              <CandidateChiefDialog\n                onClose={() => {\n                  setOpenChiefCandidate(false);\n                }}\n                isCandidate={data.gameInfo.chiefVoteState.isCandidate}\n              />\n            </Dialog>\n            {data.gameInfo.chiefVoteState.isCandidate ? (\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={() => {\n                  setOpenChiefCandidate(true);\n                }}\n                disabled={data.gameInfo.chiefVoteState.isDropedOut}\n              >\n                退水\n              </Button>\n            ) : (\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={() => {\n                  setOpenChiefCandidate(true);\n                }}\n              >\n                上警\n              </Button>\n            )}\n          </>\n        ) : null}\n      </Box>}\n      <Box display=\"flex\">\n        <TextField\n          id=\"standard-basic\"\n          label=\"姓名\"\n          variant=\"outlined\"\n          className={classes.margin}\n          margin=\"dense\"\n          value={name}\n          onChange={(e) => {\n            setValue(e.target.value);\n            setName(e.target.value);\n          }}\n        />\n      </Box>\n      <Card className={classes.root}>\n        <CardContent>\n          <Typography variant=\"h1\" component=\"h1\">\n            {roleName}\n          </Typography>\n        </CardContent>\n      </Card>\n\n      <PlayerTable data={data.players} chiefId={data.gameInfo.chiefId} />\n    </>\n  );\n}\n\nfunction TemplateInfo() {\n  const { loading, error, data } = useQuery(GET_ENABLED_TEMPLATE, {\n    fetchPolicy: \"network-only\",\n  });\n\n  if (loading) {\n    return <div>Loading</div>;\n  }\n\n  return <EnabedTemplateInfo data={data} />;\n}\n\nexport default function Player(props) {\n  const { id, pass, name } = props;\n  const [value, setValue] = React.useState(0);\n\n  const handleChange = (event, newValue) => {\n    setValue(newValue);\n  };\n\n  return (\n    <Container maxWidth={\"sm\"}>\n      <Paper elevation={3}>\n        <Tabs\n          value={value}\n          indicatorColor=\"primary\"\n          textColor=\"primary\"\n          onChange={handleChange}\n          aria-label=\"disabled tabs example\"\n          variant=\"fullWidth\"\n        >\n          <Tab label=\"玩家\" />\n          <Tab label=\"模式\" />\n        </Tabs>\n        <TabPanel value={value} index={0}>\n          <PlayerControl\n            id={id}\n            pass={pass}\n            name={name}\n            setDarkMode={props.setDarkMode}\n          />\n        </TabPanel>\n        <TabPanel value={value} index={1}>\n          <TemplateInfo />\n        </TabPanel>\n      </Paper>\n    </Container>\n  );\n}\n","import React from \"react\";\nimport logo from \"./logo.svg\";\nimport \"./App.css\";\nimport Button from \"@material-ui/core/Button\";\nimport Select from \"react-select\";\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Fab from \"@material-ui/core/Fab\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport { gql } from \"apollo-boost\";\nimport { useQuery, useMutation } from \"@apollo/client\";\n\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport Box from \"@material-ui/core/Box\";\nimport Container from \"@material-ui/core/Container\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Avatar from \"react-avatar\";\nimport {\n  fade,\n  withStyles,\n  makeStyles,\n  createMuiTheme,\n} from \"@material-ui/core/styles\";\n\nimport { useHistory } from \"react-router-dom\";\n\nconst useStyles = makeStyles((theme) => ({\n  margin: {\n    //margin: theme.spacing(1),\n  },\n  table: {\n    minWidth: 450,\n  },\n  title: {\n    flexGrow: 1,\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2),\n  },\n  container: {\n    paddingTop: theme.spacing(4),\n    paddingBottom: theme.spacing(4),\n  },\n}));\n\nconst GET_PLAYERS = gql`\n  {\n    players {\n      id\n      name\n      isEmpty\n    }\n  }\n`;\n\nconst UPDATE_PLAYER_PASS = gql`\n  mutation UpdatePlayerPass($id: Int!, $pass: String!) {\n    updatePlayerPass(id: $id, pass: $pass) {\n      isValid\n      id\n    }\n  }\n`;\n\nfunction Copyright() {\n  return (\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\n      {\"Copyright © \"}\n      {new Date().getFullYear()}\n    </Typography>\n  );\n}\n\nexport default function Login() {\n  const history = useHistory();\n  const classes = useStyles();\n\n  const [playerId, setPlayerId] = React.useState(-1);\n  const [playerPass, setPlayerPass] = React.useState(\"\");\n  const [isValid, setIsValid] = React.useState(false);\n  const { loading, error, data, stopPolling, startPolling } = useQuery(\n    GET_PLAYERS,\n    {\n      //pollInterval: 500,\n      //fetchPolicy: \"network-only\",\n    }\n  );\n\n  const [\n    updatePlayerPass,\n    { loading: passLoading, data: passData },\n  ] = useMutation(UPDATE_PLAYER_PASS, {\n    onCompleted: (data) => {\n      if (data.updatePlayerPass.isValid) {\n        history.push(\"/game\");\n      }\n    },\n  });\n\n  React.useEffect(() => {\n    startPolling(500);\n\n    return () => {\n      stopPolling();\n    };\n  }, []);\n\n  if (loading) {\n    return <div>Loading</div>;\n  }\n\n  return (\n    <Container component=\"main\" maxWidth=\"xs\">\n      <CssBaseline />\n      <div style={{ marginTop: \"20%\" }}>\n        <Avatar round={true} src=\"wolf-login.png\" />\n        <Autocomplete\n          fullWidth\n          id=\"combo-box-demo\"\n          className={classes.margin}\n          options={data.players}\n          getOptionLabel={(option) => `玩家 ${option.id}`}\n          renderOption={(option) => (\n            <React.Fragment>\n              <span\n                style={{\n                  color: option.isEmpty ? \"gray\" : \"lightgreen\",\n                  transition: \"all .3s ease\",\n                  fontSize: \"24px\",\n                  marginRight: \"10px\",\n                }}\n              >\n                &#x25cf;\n              </span>\n              {` 玩家 ${option.id}`}\n            </React.Fragment>\n          )}\n          onChange={(event, newValue) => {\n            setPlayerId(newValue.id);\n          }}\n          renderInput={(params) => (\n            <TextField\n              {...params}\n              label=\"玩家\"\n              variant=\"outlined\"\n              margin=\"dense\"\n            />\n          )}\n        />\n\n        <TextField\n          fullWidth\n          id=\"standard-basic\"\n          label=\"密碼\"\n          variant=\"outlined\"\n          className={classes.margin}\n          margin=\"dense\"\n          onChange={(e) => setPlayerPass(e.target.value)}\n          value={playerPass}\n        />\n        <Button\n          type=\"submit\"\n          fullWidth\n          variant=\"contained\"\n          color=\"primary\"\n          className={classes.submit}\n          onClick={() => {\n            updatePlayerPass({\n              variables: { id: playerId, pass: playerPass },\n            });\n          }}\n        >\n          登入\n        </Button>\n      </div>\n\n      <Box mt={8}>\n        <Copyright />\n      </Box>\n    </Container>\n  );\n}\n","import React, { useEffect } from \"react\";\nimport logo from \"./logo.svg\";\nimport \"./App.css\";\nimport Button from \"@material-ui/core/Button\";\nimport Select from \"react-select\";\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Fab from \"@material-ui/core/Fab\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport { gql } from \"apollo-boost\";\nimport {\n  useLazyQuery,\n  useQuery,\n  useMutation,\n  ApolloProvider,\n  ApolloClient,\n  HttpLink,\n  InMemoryCache,\n} from \"@apollo/client\";\n\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableContainer from \"@material-ui/core/TableContainer\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport Typography from \"@material-ui/core/Typography\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport Divider from \"@material-ui/core/Divider\";\nimport Footer from \"./Footer\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport Box from \"@material-ui/core/Box\";\nimport Container from \"@material-ui/core/Container\";\nimport { useHistory } from \"react-router-dom\";\nimport Avatar from \"react-avatar\";\nimport {\n  fade,\n  withStyles,\n  makeStyles,\n  createMuiTheme,\n} from \"@material-ui/core/styles\";\nimport { useDebounce, useDebounceCallback } from \"@react-hook/debounce\";\n//import ApolloClient from \"apollo-boost\";\n\nimport God from \"./God\";\nimport Admin from \"./Admin\";\nimport Player from \"./Player\";\n\nimport LoginPage from \"./Login\";\n\nimport { BrowserRouter as Router, Switch, Route, Link } from \"react-router-dom\";\n\n\nimport { ThemeProvider } from '@material-ui/styles';\nimport blue from '@material-ui/core/colors/blue';\nconst client = new ApolloClient({\n  cache: new InMemoryCache(),\n  link: new HttpLink({\n    uri: \"/graphql\",\n  }),\n});\n\nconst auth = new ApolloClient({\n  cache: new InMemoryCache(),\n  link: new HttpLink({\n    uri: \"/auth\",\n  }),\n});\n\nconst useStyles = makeStyles((theme) => ({\n  margin: {\n    //margin: theme.spacing(1),\n  },\n  table: {\n    minWidth: 450,\n  },\n  title: {\n    flexGrow: 1,\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2),\n  },\n  container: {\n    paddingTop: theme.spacing(4),\n    paddingBottom: theme.spacing(4),\n  },\n}));\n\nconst GET_PLAYERS = gql`\n  {\n    players {\n      id\n      name\n      isEmpty\n    }\n    login {\n      id\n      isValid\n    }\n  }\n`;\n\nconst LOG_OFF = gql`\n  mutation Logoff {\n    logoff\n  }\n`;\n\nconst UPDATE_PLAYER_PASS = gql`\n  mutation UpdatePlayerPass($id: Int!, $pass: String!) {\n    updatePlayerPass(id: $id, pass: $pass) {\n      isValid\n      name\n    }\n  }\n`;\n\nfunction Copyright() {\n  return (\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\n      {\"Copyright © \"}\n      {new Date().getFullYear()}\n    </Typography>\n  );\n}\n/*\nfunction Login() {\n  const classes = useStyles();\n\n  const [playerId, setPlayerId] = React.useState(-1);\n  const [playerPass, setPlayerPass] = React.useState(\"\");\n  const { loading, error, data } = useQuery(GET_PLAYERS);\n  const [updatePlayerPass, playerStatus] = useMutation(UPDATE_PLAYER_PASS);\n  const [isValidPlayerStatus, setIsValidPlayerStatus] = React.useState(false);\n  if (loading || playerStatus.loading) {\n    return <div>Loading</div>;\n  }\n\n  //if (playerStatus.data)\n\n  if (\n    playerStatus.called &&\n    playerStatus.data.updatePlayerPass.isValid &&\n    isValidPlayerStatus\n  ) {\n    return (\n      <React.Fragment>\n        <CssBaseline />\n        <Container maxWidth=\"sm\">\n          <AppBar position=\"absolute\">\n            <Toolbar>\n              <IconButton\n                edge=\"start\"\n                className={classes.menuButton}\n                color=\"inherit\"\n                aria-label=\"menu\"\n              >\n                <MenuIcon />\n              </IconButton>\n              <Typography variant=\"h6\" className={classes.title}>\n                小狼狼\n              </Typography>\n              <Button\n                variant=\"contained\"\n                color=\"secondary\"\n                onClick={() => {\n                  setIsValidPlayerStatus(false);\n                }}\n              >\n                退出\n              </Button>\n            </Toolbar>\n          </AppBar>\n\n          {\n            <div style={{ marginTop: 100 }}>\n              {playerId === 0 ? (\n                <God\n                  id={playerId}\n                  pass={playerPass}\n                  name={playerStatus.data.updatePlayerPass.name}\n                />\n              ) : (\n                <Player\n                  id={playerId}\n                  pass={playerPass}\n                  name={playerStatus.data.updatePlayerPass.name}\n                />\n              )}\n            </div>\n          }\n\n          <Box pt={4}>\n            <Copyright />\n          </Box>\n        </Container>\n      </React.Fragment>\n    );\n  }\n\n  return (\n    <Container component=\"main\" maxWidth=\"xs\">\n      <CssBaseline />\n      <div style={{ marginTop: \"20%\" }}>\n        <Avatar round={true} src=\"wolf-login.png\" />\n        <Autocomplete\n          fullWidth\n          id=\"combo-box-demo\"\n          className={classes.margin}\n          options={data.players}\n          getOptionLabel={(option) => `玩家 ${option.id}`}\n          renderOption={(option) => (\n            <React.Fragment>\n              <span\n                style={{\n                  color: option.isEmpty ? \"gray\" : \"lightgreen\",\n                  transition: \"all .3s ease\",\n                  fontSize: \"24px\",\n                  marginRight: \"10px\",\n                }}\n              >\n                &#x25cf;\n              </span>\n              {` 玩家 ${option.id}`}\n            </React.Fragment>\n          )}\n          onChange={(event, newValue) => {\n            setPlayerId(newValue.id);\n          }}\n          renderInput={(params) => (\n            <TextField\n              {...params}\n              label=\"玩家\"\n              variant=\"outlined\"\n              margin=\"dense\"\n            />\n          )}\n        />\n\n        <TextField\n          fullWidth\n          id=\"standard-basic\"\n          label=\"密碼\"\n          variant=\"outlined\"\n          className={classes.margin}\n          margin=\"dense\"\n          onChange={(e) => setPlayerPass(e.target.value)}\n          value={playerPass}\n        />\n        <Button\n          type=\"submit\"\n          fullWidth\n          variant=\"contained\"\n          color=\"primary\"\n          className={classes.submit}\n          onClick={() => {\n            updatePlayerPass({\n              variables: { id: playerId, pass: playerPass },\n            });\n            setIsValidPlayerStatus(true);\n          }}\n        >\n          登入\n        </Button>\n      </div>\n\n      <Box mt={8}>\n        <Copyright />\n      </Box>\n    </Container>\n  );\n}\n*/\n\nfunction LogoffButton() {\n  const history = useHistory();\n  const [logoff] = useMutation(LOG_OFF, {\n    onCompleted: () => {\n      history.push(\"/\");\n    },\n  });\n\n  return (\n    <Button\n      variant=\"contained\"\n      color=\"secondary\"\n      onClick={() => {\n        logoff();\n        //setIsValidPlayerStatus(false);\n      }}\n    >\n      退出\n    </Button>\n  );\n}\n\nfunction Game(props) {\n  const history = useHistory();\n  const [getPlayer, { loading, error, data }] = useLazyQuery(GET_PLAYERS, {\n    fetchPolicy: \"network-only\",\n  });\n\n  const classes = useStyles();\n\n  let isMounted = true;\n  useEffect(() => {\n    if (isMounted) {\n      getPlayer();\n    }\n    return () => {\n      isMounted = false;\n    };\n  }, []);\n\n  React.useEffect(() => {\n    if (error) {\n      error.graphQLErrors.forEach((e) => {\n        const { extensions } = e;\n        if (extensions.code === \"UNAUTHENTICATED\") {\n          history.push(\"/\")\n          //setIsLogoff(true);\n        }\n      });\n    }\n  }, [error]);\n\n  if (loading || !data) {\n    return <div>Loading</div>;\n  }\n\n  //const [playerId, setPlayerId] = React.useState(-1);\n  //const [playerPass, setPlayerPass] = React.useState(\"\");\n\n  //const [isLogoff, setIsLogoff] = React.useState(false);\n  /*\n  const { loading, error, data } = useQuery(GET_PLAYERS, {\n    fetchPolicy: \"network-only\",\n  });\n  */\n\n  /*\n  const [logoff, {loading:logoffLoading, data:logoffdata}] = useMutation(LOG_OFF, {\n    onCompleted: () => {\n      console.log('complete')\n      //setIsLogoff(true);\n    },\n  });\n  */\n\n  /*\n  \n  */\n\n  /*\n  React.useEffect(() => {\n    if (!loading && isLogoff && !logoffLoading) {\n      history.push(\"/\");\n    }\n  }, [loading, isLogoff, logoffLoading]);\n  */\n  /*\n  if (loading) {\n    return <div>Loading</div>;\n  }\n  */\n\n  console.log(data, loading)\n\n  const playerId = data.login.id;\n  return (\n    <React.Fragment>\n      <CssBaseline />\n      \n        <AppBar position=\"absolute\">\n          <Toolbar>\n            <IconButton\n              edge=\"start\"\n              className={classes.menuButton}\n              color=\"inherit\"\n              aria-label=\"menu\"\n            >\n              <MenuIcon />\n            </IconButton>\n            <Typography variant=\"h6\" className={classes.title}>\n              小狼狼\n            </Typography>\n            <LogoffButton />\n          </Toolbar>\n        </AppBar>\n\n        <div style={{ marginTop: 100 }}>\n          {playerId === 0 ? (\n            <Container maxWidth={playerId === 0 ? \"md\" : \"sm\"}>\n            <God id={playerId} pass={\"\"} name={\"\"} setDarkMode={props.setDarkMode} />\n            </Container>\n          ) : (\n           \n            <Player id={playerId} pass={\"\"} name={\"\"} setDarkMode={props.setDarkMode}/>\n            \n          )}\n        </div>\n\n        <Box pt={4}>\n          <Copyright />\n        </Box>\n     \n    </React.Fragment>\n  );\n}\n\n/*\nconst theme = createMuiTheme({\n  \n  palette: {\n    primary: {\n      main: '#82b1ff',\n    },\n    type: 'dark',\n  },\n  \n});\n*/\n\nfunction App() {\n\n\n  const [isDarkMode, setDarkMode] = React.useState(false);\n\n\n  const theme = React.useMemo(\n    () =>\n      createMuiTheme({\n        palette: {\n          type: isDarkMode ? 'dark' : 'light',\n          primary: isDarkMode ? {\n            main: '#82b1ff',\n          }:{\n            main: '#3f51b5',\n          },\n        },\n       \n      }),\n    [isDarkMode],\n  );\n\n\n  return (\n    <div className=\"App\">\n      <ThemeProvider theme={theme}>\n      <Router>\n        <Switch>\n          <Route exact path=\"/\">\n            <ApolloProvider client={auth}>\n              <LoginPage />\n            </ApolloProvider>\n          </Route>\n\n          <Route exact path=\"/game\">\n            <ApolloProvider client={client}>\n              <Game setDarkMode={setDarkMode}/>\n            </ApolloProvider>\n          </Route>\n        </Switch>\n      </Router>\n      </ThemeProvider>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}