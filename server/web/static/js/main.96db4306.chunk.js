(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{168:function(e,a,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},169:function(e,a,n){},246:function(e,a,n){e.exports=n(291)},291:function(e,a,n){"use strict";n.r(a);var t=n(0),r=n.n(t),l=n(21),i=n.n(l),c=n(9),o=n(16),m=(n(168),n(169),n(341)),u=n(353),d=n(351),s=n(15),b=n(14),p=n(30),g=n(332),f=n(336),E=n(335),v=n(331),O=n(333),j=n(334),y=n(224),h=n(162),x=n(349),k=n(350),C=n(294),S=n(220),$=n.n(S),w=n(329),P=n(330);n(328);Object(w.a)((function(e){return{footer:{backgroundColor:e.palette.background.paper,padding:e.spacing(6,0)}}}));var I=n(348),N=n(352),T=n(160),D=n(22),R=n(124),B=n(3),W=n(357);function F(){var e=Object(o.a)(["\n   mutation SetDieStatus($id: Int!) {\n    setDieStatus(id: $id)\n  }\n"]);return F=function(){return e},e}var L=Object(w.a)((function(e){return{margin:{margin:e.spacing(1)},table:{minWidth:450},title:{flexGrow:1},menuButton:{marginRight:e.spacing(2)}}})),z=Object(s.b)(F());function V(e){var a=L(),n=Object(b.a)(z),t=Object(c.a)(n,1)[0];return r.a.createElement(v.a,{component:y.a},r.a.createElement(g.a,{className:a.table,"aria-label":"simple table",size:"small"},r.a.createElement(O.a,null,r.a.createElement(j.a,null,r.a.createElement(E.a,null,"\u6b7b\u4ea1"),r.a.createElement(E.a,null,"ID"),r.a.createElement(E.a,{align:"right"},"\u73a9\u5bb6"),r.a.createElement(E.a,{align:"right"},"\u89d2\u8272"),r.a.createElement(E.a,{align:"right"},"\u4e0a\u7dda"))),r.a.createElement(f.a,null,e.data.map((function(e){return r.a.createElement(j.a,{key:e.id},r.a.createElement(E.a,null,e.id?r.a.createElement(W.a,{onChange:function(a){t({variables:{id:e.id}})},checked:e.isDie,color:"primary",inputProps:{"aria-label":"secondary checkbox"}}):null),r.a.createElement(E.a,{component:"th",scope:"row"},e.id),r.a.createElement(E.a,{align:"right"},e.name),r.a.createElement(E.a,{align:"right"},e.roleName),r.a.createElement(E.a,{align:"right"},r.a.createElement("span",{style:{color:e.isEmpty?"gray":e.isVoteFinish?"lightgreen":"orange",transition:"all .3s ease",fontSize:"24px",marginRight:"10px"}},"\u25cf")))})))))}function A(){var e=Object(o.a)(["\n  {\n    roles {\n      id\n      name\n      number\n    }\n    players {\n      id\n      name\n      roleName\n      isEmpty\n    }\n  }\n"]);return A=function(){return e},e}Object(s.b)(A());var G=Object(w.a)((function(e){return{margin:{margin:e.spacing(1)},table:{minWidth:450},title:{flexGrow:1},menuButton:{marginRight:e.spacing(2)}}}));function q(e){var a=G(),n=function(e){var a=0,n=[];return e.forEach((function(e){var t=e.number;t&&(a+=t,n.push(e))})),{total:a,data:n}}(e.data),t=n.total,l=n.data;return r.a.createElement(v.a,{component:y.a},r.a.createElement(g.a,{className:a.table,"aria-label":"simple table",size:"small"},r.a.createElement(O.a,null,r.a.createElement(j.a,null,r.a.createElement(E.a,null,"\u89d2\u8272"),r.a.createElement(E.a,{align:"right"},"\u4eba\u6578"))),r.a.createElement(f.a,null,l.map((function(e){return r.a.createElement(r.a.Fragment,{key:e.name},r.a.createElement(j.a,{key:e.name},r.a.createElement(E.a,{component:"th",scope:"row"},e.name),r.a.createElement(E.a,{align:"right"},e.number)),e.players?r.a.createElement(j.a,{align:"left"},e.players.map((function(e,a){return r.a.createElement("div",{style:{fontSize:22,marginLeft:45},key:a},"".concat(e.id," : ").concat(e.name))}))):null)})),r.a.createElement(j.a,null,r.a.createElement(E.a,{align:"right"},"\u7e3d\u4eba\u6578"),r.a.createElement(E.a,{align:"right"},t)))))}function U(e){var a=e.variables,n=e.query,t=e.pollInterval,l=Object(b.b)(n,{fetchPolicy:"network-only",variables:a}),i=l.loading,c=(l.error,l.data),o=l.startPolling,m=l.stopPolling;if(r.a.useEffect((function(){return o(t),m}),[]),i)return r.a.createElement("div",null,"Loading");var u=e.parseData(c);return console.log(u,a,n,c),r.a.createElement(q,{data:u})}var K=n(354),M=n(340),J=n(12),_=n(338),Y=n(53),H=n.n(Y),Q=n(219),X=n.n(Q),Z=n(218),ee=n.n(Z),ae=n(55),ne=n.n(ae);function te(){var e=Object(o.a)(["\n  {\n    roles {\n      id\n      name\n      \n    }\n    \n  }\n"]);return te=function(){return e},e}var re=Object(s.b)(te()),le=Object(w.a)((function(e){return{margin:{margin:e.spacing(1)},table:{minWidth:250},title:{flexGrow:1},menuButton:{marginRight:e.spacing(2)}}}));function ie(e){var a,n=le(),t=r.a.useState(-1),l=Object(c.a)(t,2),i=l[0],o=l[1],m=r.a.useState(0),s=Object(c.a)(m,2),p=s[0],g=s[1],f=Object(b.b)(re),E=f.loading,v=(f.error,f.data);return E?r.a.createElement("div",null,"Loading"):(console.log(v),r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement(u.a,{id:"combo-box-demo",options:v.roles.filter((function(e){return e.id>0})),getOptionLabel:function(e){return e.name},style:{width:300},onChange:function(e,a){o(a.id)},renderInput:function(e){return r.a.createElement(d.a,Object.assign({},e,{label:"\u89d2\u8272",variant:"outlined",margin:"dense"}))}}),r.a.createElement(d.a,{id:"standard-basic",label:"\u4eba\u6578",variant:"outlined",className:n.margin,margin:"dense",type:"number",value:p,onChange:function(e){return g(e.target.value)}}),r.a.createElement("div",{style:{marginTop:5}},r.a.createElement(_.a,(a={size:"medium",color:"secondary","aria-label":"add"},Object(J.a)(a,"size","small"),Object(J.a)(a,"onClick",(function(){e.updateRoleNumber({id:i,number:parseInt(p)})})),a),r.a.createElement(ne.a,null)))))}var ce=n(358),oe=n(359),me="card",ue={border:"1px dashed gray",padding:"0.5rem 1rem",marginBottom:".5rem",backgroundColor:"white",cursor:"move"},de=function(e){var a=e.id,n=e.text,l=e.index,i=e.moveCard,o=Object(t.useRef)(null),m=Object(ce.a)({accept:me,hover:function(e,a){if(o.current){var n=e.index,t=l;if(n!==t){var r=o.current.getBoundingClientRect(),c=(r.bottom-r.top)/2,m=a.getClientOffset().y-r.top;n<t&&m<c||n>t&&m>c||(i(n,t),e.index=t)}}}}),u=Object(c.a)(m,2)[1],d=Object(oe.a)({item:{type:me,id:a,index:l},collect:function(e){return{isDragging:e.isDragging()}}}),s=Object(c.a)(d,2),b=s[0].isDragging?0:1;return(0,s[1])(u(o)),r.a.createElement("div",{ref:o,style:Object(R.a)({},ue,{opacity:b})},n)},se=n(217),be=n.n(se),pe={width:400},ge=function(e){var a=Object(t.useState)(Object(D.a)(e.data)),n=Object(c.a)(a,2),l=n[0],i=n[1],o=Object(t.useCallback)((function(a,n){var t=l[a],r=be()(l,{$splice:[[a,1],[n,0,t]]});i(r),e.onUpdate(r)}),[l]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:pe},l.map((function(e,a){return function(e,a){return r.a.createElement(de,{key:e.id,index:a,id:e.id,text:e.text,moveCard:o})}(e,a)}))))},fe=n(339),Ee=n(223);function ve(){var e=Object(o.a)(["\n  mutation UpdateRolePriority($name: String!, $ids: [Int]!) {\n    updateTemplateRolePriority(name: $name, ids: $ids)\n  }\n"]);return ve=function(){return e},e}function Oe(){var e=Object(o.a)(["\n  mutation UpdateRule($name: String!, $description: String!) {\n    updateTemplateDescription(name: $name, description: $description)\n  }\n"]);return Oe=function(){return e},e}function je(){var e=Object(o.a)(["\n  mutation UpdateTempl($roleId: Int!, $number: Int!, $name: String!) {\n    updateTemplateRole(name: $name, number: $number, roleId: $roleId)\n  }\n"]);return je=function(){return e},e}function ye(){var e=Object(o.a)(["\n  query GetTemplate($name: String!) {\n    template(name: $name) {\n      roles {\n        name\n        number\n        id\n      }\n      description\n    }\n  }\n"]);return ye=function(){return e},e}var he=Object(s.b)(ye()),xe=Object(s.b)(je()),ke=Object(s.b)(Oe()),Ce=Object(s.b)(ve());function Se(e){var a=e.children,n=e.value,t=e.index,l=Object(B.a)(e,["children","value","index"]);return r.a.createElement("div",Object.assign({role:"tabpanel",hidden:n!==t,id:"full-width-tabpanel-".concat(t),"aria-labelledby":"full-width-tab-".concat(t)},l),n===t&&r.a.createElement(N.a,{p:3},a))}var $e=function(e){var a=[];return e.forEach((function(e){var n=e.name,t=e.id;a.push({id:t,text:n})})),a};function we(e){var a=e.name,n=r.a.useState([]),t=Object(c.a)(n,2),l=t[0],i=t[1],o=r.a.useState([]),m=Object(c.a)(o,2),u=m[0],d=m[1],s=r.a.useState(!1),p=Object(c.a)(s,2),g=(p[0],p[1],Object(b.b)(he,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,variables:{name:a},onCompleted:function(e){console.log("complete",e);var a=$e(e.template.roles);i(a.map((function(e){return e.id}))),d(a.map((function(e){return e.id})))}})),f=g.loading,E=(g.error,g.data),v=g.refetch,O=Object(b.a)(Ce,{onCompleted:function(){v()}}),j=Object(c.a)(O,2),y=j[0],h=j[1];if(f||h.loading)return r.a.createElement("div",null,"Loading");console.log(E,u,l);var x=$e(E.template.roles);return r.a.createElement(fe.a,{backend:Ee.a},r.a.createElement(C.a,{"aria-label":"delete",onClick:function(){y({variables:{name:a,ids:l}})},color:u.toString()===l.toString()?"primary":"secondary"},r.a.createElement(ne.a,null)),r.a.createElement(ge,{data:x,onUpdate:function(e){console.log("update view"),i(e.map((function(e){return e.id})))}}))}function Pe(e){var a=e.name,n=Object(b.a)(xe),t=Object(c.a)(n,1)[0];return r.a.useEffect((function(){return console.log("mount"+a),function(){console.log("umount"+a)}}),[]),r.a.createElement("div",null,r.a.createElement(h.a,{variant:"h2",gutterBottom:!0},a),r.a.createElement(ie,{updateRoleNumber:function(e){var n=e.id,r=e.number;console.log(n,a),t({variables:{roleId:n,name:a,number:r}})}}),r.a.createElement(U,{query:he,variables:{name:a},parseData:function(e){return console.log(e),e.template.roles},pollInterval:500}))}function Ie(e){var a=r.a.useState(e.value),n=Object(c.a)(a,2),t=n[0],l=n[1];return r.a.createElement("div",null,r.a.createElement(C.a,{"aria-label":"delete",onClick:function(){e.updateRule({variables:{description:t,name:e.name}})},color:t===e.value?"primary":"secondary"},r.a.createElement(ne.a,null)),r.a.createElement(d.a,{id:"outlined-multiline-static",multiline:!0,rows:4,fullWidth:!0,value:t,variant:"outlined",onChange:function(e){return l(e.target.value)}}))}function Ne(e){var a=e.name,n=Object(b.b)(he,{variables:{name:a}}),t=n.loading,l=(n.error,n.data),i=n.refetch,o=Object(b.a)(ke,{onCompleted:function(){i()}}),m=Object(c.a)(o,2),u=m[0];m[1];return t?r.a.createElement("div",null,"Loading"):r.a.createElement(Ie,{value:l.template.description,updateRule:u,name:a})}function Te(e){var a=e.name,n=r.a.useState(0),t=Object(c.a)(n,2),l=t[0],i=t[1];return console.log(a),r.a.createElement(y.a,{square:!0},r.a.createElement(K.a,{value:l,indicatorColor:"primary",textColor:"primary",onChange:function(e,a){i(a)},"aria-label":"disabled tabs example"},r.a.createElement(M.a,{label:"\u89d2\u8272"}),r.a.createElement(M.a,{label:"\u898f\u5247"}),r.a.createElement(M.a,{label:"\u9ed1\u591c\u9806\u5e8f"})),r.a.createElement(Se,{value:l,index:0},r.a.createElement(Pe,{name:a})),r.a.createElement(Se,{value:l,index:1},r.a.createElement(Ne,{name:a})),r.a.createElement(Se,{value:l,index:2},r.a.createElement(we,{name:a})))}function De(){var e=Object(o.a)(["\n  mutation EnableTemplate($name: String!) {\n    enableTemplate(name: $name)\n  }\n"]);return De=function(){return e},e}function Re(){var e=Object(o.a)(["\n  mutation DeleteTemplate($name: String!) {\n    deleteTemplate(name: $name)\n  }\n"]);return Re=function(){return e},e}function Be(){var e=Object(o.a)(["\n  mutation addTemplate($name: String!) {\n    addNewTemplate(name: $name)\n  }\n"]);return Be=function(){return e},e}function We(){var e=Object(o.a)(["\n  {\n    templates {\n      isEnabled\n      name\n    }\n  }\n"]);return We=function(){return e},e}var Fe=Object(w.a)((function(e){return{margin:{margin:e.spacing(1)},table:{minWidth:250},title:{flexGrow:1},menuButton:{marginRight:e.spacing(2)}}})),Le=Object(s.b)(We()),ze=Object(s.b)(Be()),Ve=Object(s.b)(Re()),Ae=Object(s.b)(De());function Ge(e){var a=Fe();return r.a.createElement(v.a,{component:y.a},r.a.createElement(g.a,{className:a.table,"aria-label":"simple table",size:"small"},r.a.createElement(O.a,null,r.a.createElement(j.a,null,r.a.createElement(E.a,null,"\u9078\u64c7"),r.a.createElement(E.a,{align:"left"},"\u904a\u6232\u6a21\u5f0f"),r.a.createElement(E.a,{align:"right"},r.a.createElement("div",{style:{marginRight:10}},"\u7de8\u8f2f")),r.a.createElement(E.a,{align:"right"},r.a.createElement("div",{style:{marginRight:10}},"\u522a\u9664")))),r.a.createElement(f.a,null,e.data.map((function(a){return r.a.createElement(j.a,{key:a.name},r.a.createElement(E.a,null,r.a.createElement(W.a,{onChange:function(n){n.target.checked&&e.onSelect(a.name)},color:"primary",inputProps:{"aria-label":"secondary checkbox"},checked:a.isEnabled})),r.a.createElement(E.a,{align:"left"},a.name),r.a.createElement(E.a,{align:"right"},r.a.createElement(C.a,{"aria-label":"delete",onClick:function(){console.log(a.name),e.onEdit(a.name)}},r.a.createElement(ee.a,null))),r.a.createElement(E.a,{align:"right"},r.a.createElement(C.a,{"aria-label":"delete",onClick:function(){e.onDelete(a.name)},disabled:a.isEnabled},r.a.createElement(X.a,null))))})))))}function qe(e){var a,n=Fe(),t=Object(b.a)(ze),l=Object(c.a)(t,1)[0],i=Object(b.a)(Ve),o=Object(c.a)(i,1)[0],m=r.a.useState(""),u=Object(c.a)(m,2),s=u[0],p=u[1],g=r.a.useState(!1),f=Object(c.a)(g,2),E=f[0],v=f[1],O=Object(b.b)(Le,{}),j=O.loading,y=(O.error,O.data),h=O.stopPolling,x=O.startPolling,k=(O.called,Object(b.a)(Ae,{onCompleted:function(){v(!0),x(500),setTimeout((function(){v(!1)}),2e3)}})),C=Object(c.a)(k,2),S=C[0],$=C[1];return r.a.useEffect((function(){return x(500),h}),[]),j||j||$.loading||E?r.a.createElement("div",null,"Loading"):r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement(d.a,{id:"standard-basic",label:"\u6a21\u5f0f\u540d\u7a31",variant:"outlined",className:n.margin,margin:"dense",value:s,onChange:function(e){return p(e.target.value)}}),r.a.createElement("div",{style:{marginTop:5}},r.a.createElement(_.a,(a={size:"medium",color:"secondary","aria-label":"add"},Object(J.a)(a,"size","small"),Object(J.a)(a,"onClick",(function(){l({variables:{name:s}})})),a),r.a.createElement(H.a,null)))),r.a.createElement(P.a,{maxWidth:"sm"},r.a.createElement(Ge,{data:y.templates,onEdit:function(a){e.setEditName(a)},onSelect:function(e){S({variables:{name:e}}),h()},onDelete:function(e){o({variables:{name:e}})}})))}function Ue(){Fe();var e=r.a.useState(""),a=Object(c.a)(e,2),n=(a[0],a[1],r.a.useState("")),t=Object(c.a)(n,2),l=t[0],i=t[1],o=Object(b.a)(ze),u=(Object(c.a)(o,1)[0],Object(b.a)(Ve)),d=(Object(c.a)(u,1)[0],r.a.useState(!1)),s=Object(c.a)(d,2);s[0],s[1];return l?r.a.createElement("div",null,r.a.createElement(N.a,{display:"flex"},r.a.createElement(m.a,{variant:"contained",color:"secondary",onClick:function(){i("")}},"\u9000\u51fa")),r.a.createElement(Te,{name:l})):r.a.createElement(qe,{setEditName:function(e){i(e)}})}function Ke(){var e=Object(o.a)(["\n  {\n    enabledTemplate {\n      name\n      description\n      roles {\n        name\n        id\n        number\n      }\n    }\n  }\n"]);return Ke=function(){return e},e}var Me=Object(s.b)(Ke());function Je(e){var a=Object(b.b)(Me,{fetchPolicy:"network-only"}),n=a.loading,t=(a.error,a.data);if(n)return r.a.createElement("div",null,"Loading");var l=t.enabledTemplate,i=l.name,c=l.description,o=l.roles;return console.log(t.enabledTemplate),r.a.createElement("div",null,r.a.createElement(h.a,{variant:"h2",gutterBottom:!0},i),r.a.createElement(d.a,{id:"outlined-multiline-static",multiline:!0,rows:6,fullWidth:!0,value:c,variant:"outlined",label:"\u898f\u5247",disabled:!0}),r.a.createElement(q,{data:o}))}var _e=n(92),Ye=n(360),He=n(344),Qe=n(355),Xe=n(342),Ze=n(343);function ea(){var e=Object(o.a)(["\n  mutation DarkStart($targets: [Int]) {\n    voteStart(targets: $targets)\n  }\n"]);return ea=function(){return e},e}function aa(){var e=Object(o.a)(["\n  mutation DarkStart {\n    darkStart\n  }\n"]);return aa=function(){return e},e}function na(){var e=Object(o.a)(["\n  mutation RemoveAllPlayer {\n    removeAllPlayer\n  }\n"]);return na=function(){return e},e}function ta(){var e=Object(o.a)(["\n  mutation GenerateTemplatePlayer {\n    generateTemplatePlayer\n  }\n"]);return ta=function(){return e},e}function ra(){var e=Object(o.a)(["\n  mutation GenerateTemplateRole {\n    generateTemplateRole\n  }\n"]);return ra=function(){return e},e}function la(){var e=Object(o.a)(["\n  mutation UpdatePlayerName($id: Int!, $name: String!) {\n    updatePlayerName(id: $id, name: $name)\n  }\n"]);return la=function(){return e},e}function ia(){var e=Object(o.a)(["\n  {\n    enabledTemplate {\n      name\n      description\n      roles {\n        name\n        id\n        number\n      }\n    }\n    players {\n      id\n      name\n      roleName\n    }\n  }\n"]);return ia=function(){return e},e}function ca(){var e=Object(o.a)(["\n  {\n    players {\n      id\n      name\n      roleName\n      isEmpty\n      isDie\n      isVoteFinish\n    }\n    gameInfo(id: 0) {\n      isVoteFinish\n    }\n  }\n"]);return ca=function(){return e},e}var oa=Object(s.b)(ca()),ma=Object(s.b)(ia()),ua=Object(s.b)(la()),da=Object(s.b)(ra()),sa=Object(s.b)(ta()),ba=Object(s.b)(na()),pa=(Object(s.b)(aa()),Object(s.b)(ea())),ga=Object(w.a)((function(e){return{margin:{margin:e.spacing(1)},table:{minWidth:250},title:{flexGrow:1},menuButton:{marginRight:e.spacing(2)}}}));function fa(e){var a=e.children,n=e.value,t=e.index,l=Object(B.a)(e,["children","value","index"]);return r.a.createElement("div",Object.assign({role:"tabpanel",hidden:n!==t,id:"full-width-tabpanel-".concat(t),"aria-labelledby":"full-width-tab-".concat(t)},l),n===t&&r.a.createElement(N.a,{p:3},a))}function Ea(e){return r.a.createElement(U,{query:ma,variables:{},parseData:function(e){var a={};e.players.forEach((function(e){var n=e.roleName,t=e.name,r=e.id;a[n]?a[n].push({name:t||"",id:r}):a[n]=[{name:t||"",id:r}]})),console.log(a);var n=[];return e.enabledTemplate.roles.forEach((function(e){console.log("r",e);var t=e.name;n.push(Object(R.a)({},e,{players:a[t]}))})),console.log(n),n},pollInterval:500})}function va(e){var a=r.a.useState([]),n=Object(c.a)(a,2),t=n[0],l=n[1],i=Object(b.a)(pa,{onCompleted:function(){e.onClose()}}),o=Object(c.a)(i,1)[0];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Xe.a,null,e.players.filter((function(e){return!e.isDie&&0!==e.id})).map((function(a){return r.a.createElement("div",{key:a.id},r.a.createElement(Qe.a,{checked:t.includes(a.id),name:"radio-button-demo",inputProps:{"aria-label":"B"},onClick:function(){t.includes(a.id)||t.length+1===e.players.filter((function(e){return!e.isDie&&0!==e.id})).length||l([].concat(Object(D.a)(t),[a.id]))}})," ".concat(a.id," : ").concat(a.name||""))})),r.a.createElement(Qe.a,{checked:0===t.length,name:"radio-button-demo",inputProps:{"aria-label":"B"},onClick:function(){l([])}}),"\u6240\u6709\u4eba"),r.a.createElement(Ze.a,null,r.a.createElement(m.a,{onClick:function(){o({variables:{targets:t}})},color:"primary"},"\u78ba\u8a8d")))}function Oa(e){ga();var a=Object(b.a)(da),n=Object(c.a)(a,1)[0],t=Object(b.a)(sa),l=Object(c.a)(t,1)[0],i=Object(b.a)(ba),o=Object(c.a)(i,1)[0],u=Object(b.a)(pa),s=(Object(c.a)(u,1)[0],r.a.useState(!1)),p=Object(c.a)(s,2),g=p[0],f=p[1],E=Object(_e.a)(e.name,500),v=Object(c.a)(E,2),O=v[0],j=v[1],y=r.a.useState(e.name||""),h=Object(c.a)(y,2),x=h[0],k=h[1],C=Object(b.a)(ua),S=Object(c.a)(C,2),$=S[0],w=S[1].called;return r.a.useEffect((function(){O&&(O!==e.name||w)&&$({variables:{id:0,name:O}})}),[O]),e.isPlayerMode?r.a.createElement("div",{style:{}},r.a.createElement(Ye.a,{"aria-labelledby":"simple-dialog-title",open:g,onClose:function(){f(!1)}},r.a.createElement(He.a,{id:"form-dialog-title"},"\u653e\u9010\u958b\u59cb"),r.a.createElement(va,{players:e.players,onClose:function(){f(!1)}})),r.a.createElement(N.a,{display:"flex"},r.a.createElement(m.a,{variant:"contained",color:"primary",onClick:function(){n()}},"\u7522\u751f\u89d2\u8272"),r.a.createElement(m.a,{variant:"contained",color:"secondary",onClick:function(){o()}},"\u522a\u9664\u73a9\u5bb6"),r.a.createElement(m.a,{variant:"contained",color:"secondary",onClick:function(){f(!0)}},"\u653e\u9010")),r.a.createElement(N.a,{display:"flex"},r.a.createElement(d.a,{id:"standard-basic",label:"\u59d3\u540d",variant:"outlined",margin:"dense",value:x,onChange:function(e){j(e.target.value),k(e.target.value)}})),r.a.createElement(V,{data:e.players})):r.a.createElement("div",{style:{}},r.a.createElement(N.a,{display:"flex"},r.a.createElement(m.a,{variant:"contained",color:"primary",onClick:function(){l()}},"\u52a0\u5165\u73a9\u5bb6")),r.a.createElement(Je,null))}function ja(e){var a=r.a.useState(0),n=Object(c.a)(a,2),t=n[0],l=n[1],i=Object(b.b)(oa,{pollInterval:500}),o=i.loading,m=(i.error,i.data);if(o)return r.a.createElement("div",null,"Loading");var u=e.id,d=e.pass,s=e.name,p=m.players.length>1;return r.a.createElement(y.a,{elevation:3},r.a.createElement(K.a,{value:t,indicatorColor:"primary",textColor:"primary",onChange:function(e,a){l(a)},"aria-label":"disabled tabs example",variant:"fullWidth"},r.a.createElement(M.a,{label:"\u904a\u6232"}),r.a.createElement(M.a,{label:p?"\u9ed1\u591c\u8996\u91ce":"\u6a21\u5f0f\u9078\u64c7"}),p&&r.a.createElement(M.a,{label:"\u6a21\u5f0f"})),r.a.createElement(fa,{value:t,index:0},r.a.createElement(Oa,{isPlayerMode:p,id:u,pass:d,name:s,players:m.players})),r.a.createElement(fa,{value:t,index:1},p?r.a.createElement(Ea,null):r.a.createElement(Ue,null)),p&&r.a.createElement(fa,{value:t,index:2},r.a.createElement(Je,null)))}var ya=n(346),ha=n(347);n(345);function xa(){var e=Object(o.a)(["\n  mutation DarkAction($targetId: Int!, $id: Int!) {\n    exeDarkAction(targetId: $targetId, id: $id)\n  }\n"]);return xa=function(){return e},e}function ka(){var e=Object(o.a)(["\n  mutation UpdatePlayerName($id: Int!, $name: String!) {\n    updatePlayerName(id: $id, name: $name)\n  }\n"]);return ka=function(){return e},e}function Ca(){var e=Object(o.a)(["\n   mutation SubmitVote($id: Int!, $target: Int!) {\n    submitVote(id: $id, target: $target)\n  }\n"]);return Ca=function(){return e},e}function Sa(){var e=Object(o.a)(["\n  query GetPlayer($id: Int!, $pass: String!) {\n    player(id: $id, pass: $pass) {\n      id\n      name\n      roleName\n    }\n    players(id: $id) {\n      id\n      name\n      isEmpty\n      revealedRole\n      isDie\n      vote\n      isValidCandidate\n      isVoteFinish\n    }\n    wolfKillList(id: $id) {\n      id\n      isKill\n    }\n    gameInfo(id: $id) {\n      isVoteFinish\n    }\n    darkInfo(id: $id) {\n      isStart\n      remainTime\n      actRoleType\n      darkDay\n      targetList {\n        id\n        isKill\n      }\n    }\n  }\n"]);return Sa=function(){return e},e}new s.a({uri:"/graphql"});var $a=Object(w.a)((function(e){return{margin:{},table:{minWidth:450},title:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},submit:{margin:e.spacing(3,0,2)},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)}}})),wa=Object(s.b)(Sa()),Pa=Object(s.b)(Ca()),Ia=Object(s.b)(ka());Object(s.b)(xa());function Na(e){var a=e.children,n=e.value,t=e.index,l=Object(B.a)(e,["children","value","index"]);return r.a.createElement("div",Object.assign({role:"tabpanel",hidden:n!==t,id:"full-width-tabpanel-".concat(t),"aria-labelledby":"full-width-tab-".concat(t)},l),n===t&&r.a.createElement(N.a,{p:3},a))}function Ta(e){var a=$a();return r.a.createElement(v.a,{component:y.a},r.a.createElement(g.a,{className:a.table,"aria-label":"simple table",size:"small"},r.a.createElement(O.a,null,r.a.createElement(j.a,null,r.a.createElement(E.a,null,"ID"),r.a.createElement(E.a,{align:"center"},"\u73a9\u5bb6"),r.a.createElement(E.a,{align:"center"},"\u653e\u9010"),r.a.createElement(E.a,{align:"right"},"\u72c0\u614b"))),r.a.createElement(f.a,null,e.data.map((function(e){return r.a.createElement(j.a,{key:e.id},r.a.createElement(E.a,{component:"th",scope:"row"},e.isDie?r.a.createElement("span",{"aria-label":"paw",style:{fontSize:30}},"\ud83d\udc3e"):e.id),r.a.createElement(E.a,{align:"center"},e.name),r.a.createElement(E.a,{align:"right"},e.vote.toString()),r.a.createElement(E.a,{align:"right"},r.a.createElement("span",{style:{color:e.isEmpty?"gray":e.isVoteFinish?"lightgreen":"orange",transition:"all .3s ease",fontSize:"24px",marginRight:"10px"}},"\u25cf")))})))))}new Audio("/witch_kill.mp3"),new Audio("/witch_save.mp3"),new Audio("/wolf.mp3"),new Audio("/prophet.mp3"),new Audio("/hunter.mp3"),new Audio("/guard.mp3");function Da(e){var a=r.a.useState(-1),n=Object(c.a)(a,2),t=n[0],l=n[1],i=Object(b.a)(Pa),o=Object(c.a)(i,2),u=o[0];o[1].called;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Xe.a,null,e.players.filter((function(e){return e.isValidCandidate})).map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement(Qe.a,{checked:e.id===t,name:"radio-button-demo",inputProps:{"aria-label":"B"},onClick:function(){l(e.id)}})," ".concat(e.id," : ").concat(e.name||""))})),r.a.createElement(Qe.a,{checked:-1===t,name:"radio-button-demo",inputProps:{"aria-label":"B"},onClick:function(){l(-1)}}),"\u68c4\u6b0a"),r.a.createElement(Ze.a,null,r.a.createElement(m.a,{onClick:function(){u({variables:{id:e.id,target:t}})},color:"primary"},"\u78ba\u8a8d")))}function Ra(e){var a=$a(),n=Object(b.b)(wa,{fetchPolicy:"network-only",variables:{id:e.id,pass:e.pass},pollInterval:500}),t=n.loading,l=(n.error,n.data),i=r.a.useState(!0),o=Object(c.a)(i,2),m=(o[0],o[1],Object(_e.a)(e.name,500)),u=Object(c.a)(m,2),s=u[0],p=u[1],g=r.a.useState(e.name),f=Object(c.a)(g,2),E=f[0],v=f[1],O=Object(b.a)(Ia),j=Object(c.a)(O,2),y=j[0],x=j[1].called;if(r.a.useEffect((function(){s&&(s!==e.name||x)&&y({variables:{id:e.id,name:s}})}),[s]),t)return r.a.createElement("div",null,"Loading");var k=l.player,C=k.id,S=(k.name,k.roleName);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ye.a,{"aria-labelledby":"simple-dialog-title",open:!l.gameInfo.isVoteFinish},r.a.createElement(He.a,{id:"form-dialog-title"},"\u653e\u9010\u73a9\u5bb6"),r.a.createElement(Da,{players:l.players,id:C})),r.a.createElement(N.a,{display:"flex"},r.a.createElement(d.a,{id:"standard-basic",label:"\u59d3\u540d",variant:"outlined",className:a.margin,margin:"dense",value:E,onChange:function(e){p(e.target.value),v(e.target.value)}})),r.a.createElement(ya.a,{className:a.root},r.a.createElement(ha.a,null,r.a.createElement(h.a,{variant:"h1",component:"h1"},S))),r.a.createElement(Ta,{data:l.players}))}function Ba(e){var a=e.id,n=e.pass,t=e.name,l=r.a.useState(0),i=Object(c.a)(l,2),o=i[0],m=i[1];return r.a.createElement(y.a,{elevation:3},r.a.createElement(K.a,{value:o,indicatorColor:"primary",textColor:"primary",onChange:function(e,a){m(a)},"aria-label":"disabled tabs example",variant:"fullWidth"},r.a.createElement(M.a,{label:"\u73a9\u5bb6"}),r.a.createElement(M.a,{label:"\u6a21\u5f0f"})),r.a.createElement(Na,{value:o,index:0},r.a.createElement(Ra,{id:a,pass:n,name:t})),r.a.createElement(Na,{value:o,index:1},r.a.createElement(Je,null)))}function Wa(){var e=Object(o.a)(["\n  mutation UpdatePlayerPass($id: Int!, $pass: String!) {\n    updatePlayerPass(id: $id, pass: $pass) {\n      isValid\n      name\n    }\n  }\n"]);return Wa=function(){return e},e}function Fa(){var e=Object(o.a)(["\n  {\n    players {\n      id\n      name\n      isEmpty\n    }\n  }\n"]);return Fa=function(){return e},e}var La=new s.a({uri:"/graphql",connectToDevTools:!0}),za=Object(w.a)((function(e){return{margin:{},table:{minWidth:450},title:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},submit:{margin:e.spacing(3,0,2)},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)}}})),Va=Object(s.b)(Fa()),Aa=Object(s.b)(Wa());function Ga(){return r.a.createElement(h.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",(new Date).getFullYear())}function qa(){var e=za(),a=r.a.useState(-1),n=Object(c.a)(a,2),t=n[0],l=n[1],i=r.a.useState(""),o=Object(c.a)(i,2),s=o[0],p=o[1],g=Object(b.b)(Va),f=g.loading,E=(g.error,g.data),v=Object(b.a)(Aa),O=Object(c.a)(v,2),j=O[0],y=O[1],S=r.a.useState(!1),w=Object(c.a)(S,2),D=w[0],R=w[1];return f||y.loading?r.a.createElement("div",null,"Loading"):y.called&&y.data.updatePlayerPass.isValid&&D?r.a.createElement(r.a.Fragment,null,r.a.createElement(I.a,null),r.a.createElement(P.a,{maxWidth:"sm"},r.a.createElement(x.a,{position:"absolute"},r.a.createElement(k.a,null,r.a.createElement(C.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu"},r.a.createElement($.a,null)),r.a.createElement(h.a,{variant:"h6",className:e.title},"\u5c0f\u72fc\u72fc"),r.a.createElement(m.a,{variant:"contained",color:"secondary",onClick:function(){R(!1)}},"\u9000\u51fa"))),r.a.createElement("div",{style:{marginTop:100}},0===t?r.a.createElement(ja,{id:t,pass:s,name:y.data.updatePlayerPass.name}):r.a.createElement(Ba,{id:t,pass:s,name:y.data.updatePlayerPass.name})),r.a.createElement(N.a,{pt:4},r.a.createElement(Ga,null)))):r.a.createElement(P.a,{component:"main",maxWidth:"xs"},r.a.createElement(I.a,null),r.a.createElement("div",{style:{marginTop:"20%"}},r.a.createElement(T.a,{round:!0,src:"wolf-login.png"}),r.a.createElement(u.a,{fullWidth:!0,id:"combo-box-demo",className:e.margin,options:E.players,getOptionLabel:function(e){return"\u73a9\u5bb6 ".concat(e.id)},renderOption:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{style:{color:e.isEmpty?"gray":"lightgreen",transition:"all .3s ease",fontSize:"24px",marginRight:"10px"}},"\u25cf")," \u73a9\u5bb6 ".concat(e.id))},onChange:function(e,a){l(a.id)},renderInput:function(e){return r.a.createElement(d.a,Object.assign({},e,{label:"\u73a9\u5bb6",variant:"outlined",margin:"dense"}))}}),r.a.createElement(d.a,{fullWidth:!0,id:"standard-basic",label:"\u5bc6\u78bc",variant:"outlined",className:e.margin,margin:"dense",onChange:function(e){return p(e.target.value)},value:s}),r.a.createElement(m.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:function(){j({variables:{id:t,pass:s}}),R(!0)}},"\u767b\u5165")),r.a.createElement(N.a,{mt:8},r.a.createElement(Ga,null)))}var Ua=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(p.a,{client:La},r.a.createElement(qa,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ua,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[246,1,2]]]);
//# sourceMappingURL=main.96db4306.chunk.js.map